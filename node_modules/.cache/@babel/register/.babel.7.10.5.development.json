{
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/server.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _router = _interopRequireDefault(require(\"./router\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// at top of server.js\n_dotenv.default.config({\n  silent: true\n}); // DB Setup\n\n\nconst mongoURI = process.env.MONGODB_URI || 'mongodb://localhost/platform_db';\n\n_mongoose.default.connect(mongoURI); // set mongoose promises to es6 default\n\n\n_mongoose.default.Promise = global.Promise; // initialize\n\nconst app = (0, _express.default)(); // enable/disable cross origin resource sharing if necessary\n\napp.use((0, _cors.default)()); // enable/disable http request logging\n\napp.use((0, _morgan.default)('dev')); // enable only if you want templating\n\napp.set('view engine', 'ejs'); // enable only if you want static assets from folder static\n\napp.use(_express.default.static('static')); // this just allows us to render ejs from the ../app/views directory\n\napp.set('views', _path.default.join(__dirname, '../src/views')); // enable json message body for posting data to API\n\napp.use(_bodyParser.default.urlencoded({\n  extended: true\n}));\napp.use(_bodyParser.default.json()); // REGISTER OUR ROUTES -------------------------------\n// all of our routes will be prefixed with /api\n// this should go AFTER body parser\n\napp.use('/api', _router.default); // additional init stuff should go before hitting the routing\n// default index route\n\napp.get('/', (req, res) => {\n  res.send('hi');\n}); // START THE SERVER\n// =============================================================================\n\nconst port = process.env.PORT || 9090;\napp.listen(port);\nconsole.log(`listening on: ${port}`);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJzaWxlbnQiLCJtb25nb1VSSSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIm1vbmdvb3NlIiwiY29ubmVjdCIsIlByb21pc2UiLCJnbG9iYWwiLCJhcHAiLCJ1c2UiLCJzZXQiLCJleHByZXNzIiwic3RhdGljIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJib2R5UGFyc2VyIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsImFwaVJvdXRlciIsImdldCIsInJlcSIsInJlcyIsInNlbmQiLCJwb3J0IiwiUE9SVCIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFGQTtBQUlBQSxnQkFBT0MsTUFBUCxDQUFjO0FBQUVDLEVBQUFBLE1BQU0sRUFBRTtBQUFWLENBQWQsRSxDQUVBOzs7QUFDQSxNQUFNQyxRQUFRLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFaLElBQTJCLGlDQUE1Qzs7QUFDQUMsa0JBQVNDLE9BQVQsQ0FBaUJMLFFBQWpCLEUsQ0FDQTs7O0FBQ0FJLGtCQUFTRSxPQUFULEdBQW1CQyxNQUFNLENBQUNELE9BQTFCLEMsQ0FFQTs7QUFDQSxNQUFNRSxHQUFHLEdBQUcsdUJBQVosQyxDQUVBOztBQUNBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxvQkFBUixFLENBRUE7O0FBQ0FELEdBQUcsQ0FBQ0MsR0FBSixDQUFRLHFCQUFPLEtBQVAsQ0FBUixFLENBRUE7O0FBQ0FELEdBQUcsQ0FBQ0UsR0FBSixDQUFRLGFBQVIsRUFBdUIsS0FBdkIsRSxDQUVBOztBQUNBRixHQUFHLENBQUNDLEdBQUosQ0FBUUUsaUJBQVFDLE1BQVIsQ0FBZSxRQUFmLENBQVIsRSxDQUVBOztBQUNBSixHQUFHLENBQUNFLEdBQUosQ0FBUSxPQUFSLEVBQWlCRyxjQUFLQyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsY0FBckIsQ0FBakIsRSxDQUVBOztBQUNBUCxHQUFHLENBQUNDLEdBQUosQ0FBUU8sb0JBQVdDLFVBQVgsQ0FBc0I7QUFBRUMsRUFBQUEsUUFBUSxFQUFFO0FBQVosQ0FBdEIsQ0FBUjtBQUNBVixHQUFHLENBQUNDLEdBQUosQ0FBUU8sb0JBQVdHLElBQVgsRUFBUixFLENBQ0E7QUFDQTtBQUNBOztBQUNBWCxHQUFHLENBQUNDLEdBQUosQ0FBUSxNQUFSLEVBQWdCVyxlQUFoQixFLENBRUE7QUFFQTs7QUFDQVosR0FBRyxDQUFDYSxHQUFKLENBQVEsR0FBUixFQUFhLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3pCQSxFQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxJQUFUO0FBQ0QsQ0FGRCxFLENBSUE7QUFDQTs7QUFDQSxNQUFNQyxJQUFJLEdBQUd4QixPQUFPLENBQUNDLEdBQVIsQ0FBWXdCLElBQVosSUFBb0IsSUFBakM7QUFDQWxCLEdBQUcsQ0FBQ21CLE1BQUosQ0FBV0YsSUFBWDtBQUVBRyxPQUFPLENBQUNDLEdBQVIsQ0FBYSxpQkFBZ0JKLElBQUssRUFBbEMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2pvbmFoa2Vyc2hlbi9Eb2N1bWVudHMvRGFydG1vdXRoLzIwWC9DT1NDXzUyL3BsYXRmb3JtLWFwaS1qb25haGthbHNuZXJrZXJzaGVuL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgbW9yZ2FuIGZyb20gJ21vcmdhbic7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuLy8gYXQgdG9wIG9mIHNlcnZlci5qc1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGFwaVJvdXRlciBmcm9tICcuL3JvdXRlcic7XG5cbmRvdGVudi5jb25maWcoeyBzaWxlbnQ6IHRydWUgfSk7XG5cbi8vIERCIFNldHVwXG5jb25zdCBtb25nb1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0L3BsYXRmb3JtX2RiJztcbm1vbmdvb3NlLmNvbm5lY3QobW9uZ29VUkkpO1xuLy8gc2V0IG1vbmdvb3NlIHByb21pc2VzIHRvIGVzNiBkZWZhdWx0XG5tb25nb29zZS5Qcm9taXNlID0gZ2xvYmFsLlByb21pc2U7XG5cbi8vIGluaXRpYWxpemVcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gZW5hYmxlL2Rpc2FibGUgY3Jvc3Mgb3JpZ2luIHJlc291cmNlIHNoYXJpbmcgaWYgbmVjZXNzYXJ5XG5hcHAudXNlKGNvcnMoKSk7XG5cbi8vIGVuYWJsZS9kaXNhYmxlIGh0dHAgcmVxdWVzdCBsb2dnaW5nXG5hcHAudXNlKG1vcmdhbignZGV2JykpO1xuXG4vLyBlbmFibGUgb25seSBpZiB5b3Ugd2FudCB0ZW1wbGF0aW5nXG5hcHAuc2V0KCd2aWV3IGVuZ2luZScsICdlanMnKTtcblxuLy8gZW5hYmxlIG9ubHkgaWYgeW91IHdhbnQgc3RhdGljIGFzc2V0cyBmcm9tIGZvbGRlciBzdGF0aWNcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoJ3N0YXRpYycpKTtcblxuLy8gdGhpcyBqdXN0IGFsbG93cyB1cyB0byByZW5kZXIgZWpzIGZyb20gdGhlIC4uL2FwcC92aWV3cyBkaXJlY3RvcnlcbmFwcC5zZXQoJ3ZpZXdzJywgcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3NyYy92aWV3cycpKTtcblxuLy8gZW5hYmxlIGpzb24gbWVzc2FnZSBib2R5IGZvciBwb3N0aW5nIGRhdGEgdG8gQVBJXG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuLy8gUkVHSVNURVIgT1VSIFJPVVRFUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBhbGwgb2Ygb3VyIHJvdXRlcyB3aWxsIGJlIHByZWZpeGVkIHdpdGggL2FwaVxuLy8gdGhpcyBzaG91bGQgZ28gQUZURVIgYm9keSBwYXJzZXJcbmFwcC51c2UoJy9hcGknLCBhcGlSb3V0ZXIpO1xuXG4vLyBhZGRpdGlvbmFsIGluaXQgc3R1ZmYgc2hvdWxkIGdvIGJlZm9yZSBoaXR0aW5nIHRoZSByb3V0aW5nXG5cbi8vIGRlZmF1bHQgaW5kZXggcm91dGVcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnNlbmQoJ2hpJyk7XG59KTtcblxuLy8gU1RBUlQgVEhFIFNFUlZFUlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDkwOTA7XG5hcHAubGlzdGVuKHBvcnQpO1xuXG5jb25zb2xlLmxvZyhgbGlzdGVuaW5nIG9uOiAke3BvcnR9YCk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "dotenv",
        "config",
        "silent",
        "mongoURI",
        "process",
        "env",
        "MONGODB_URI",
        "mongoose",
        "connect",
        "Promise",
        "global",
        "app",
        "use",
        "set",
        "express",
        "static",
        "path",
        "join",
        "__dirname",
        "bodyParser",
        "urlencoded",
        "extended",
        "json",
        "apiRouter",
        "get",
        "req",
        "res",
        "send",
        "port",
        "PORT",
        "listen",
        "console",
        "log"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAFA;AAIAA,gBAAOC,MAAP,CAAc;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAd,E,CAEA;;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,WAAZ,IAA2B,iCAA5C;;AACAC,kBAASC,OAAT,CAAiBL,QAAjB,E,CACA;;;AACAI,kBAASE,OAAT,GAAmBC,MAAM,CAACD,OAA1B,C,CAEA;;AACA,MAAME,GAAG,GAAG,uBAAZ,C,CAEA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR,E,CAEA;;AACAD,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR,E,CAEA;;AACAD,GAAG,CAACE,GAAJ,CAAQ,aAAR,EAAuB,KAAvB,E,CAEA;;AACAF,GAAG,CAACC,GAAJ,CAAQE,iBAAQC,MAAR,CAAe,QAAf,CAAR,E,CAEA;;AACAJ,GAAG,CAACE,GAAJ,CAAQ,OAAR,EAAiBG,cAAKC,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAjB,E,CAEA;;AACAP,GAAG,CAACC,GAAJ,CAAQO,oBAAWC,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAV,GAAG,CAACC,GAAJ,CAAQO,oBAAWG,IAAX,EAAR,E,CACA;AACA;AACA;;AACAX,GAAG,CAACC,GAAJ,CAAQ,MAAR,EAAgBW,eAAhB,E,CAEA;AAEA;;AACAZ,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS,IAAT;AACD,CAFD,E,CAIA;AACA;;AACA,MAAMC,IAAI,GAAGxB,OAAO,CAACC,GAAR,CAAYwB,IAAZ,IAAoB,IAAjC;AACAlB,GAAG,CAACmB,MAAJ,CAAWF,IAAX;AAEAG,OAAO,CAACC,GAAR,CAAa,iBAAgBJ,IAAK,EAAlC",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
      "sourcesContent": [
        "import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport path from 'path';\nimport morgan from 'morgan';\nimport mongoose from 'mongoose';\n// at top of server.js\nimport dotenv from 'dotenv';\nimport apiRouter from './router';\n\ndotenv.config({ silent: true });\n\n// DB Setup\nconst mongoURI = process.env.MONGODB_URI || 'mongodb://localhost/platform_db';\nmongoose.connect(mongoURI);\n// set mongoose promises to es6 default\nmongoose.Promise = global.Promise;\n\n// initialize\nconst app = express();\n\n// enable/disable cross origin resource sharing if necessary\napp.use(cors());\n\n// enable/disable http request logging\napp.use(morgan('dev'));\n\n// enable only if you want templating\napp.set('view engine', 'ejs');\n\n// enable only if you want static assets from folder static\napp.use(express.static('static'));\n\n// this just allows us to render ejs from the ../app/views directory\napp.set('views', path.join(__dirname, '../src/views'));\n\n// enable json message body for posting data to API\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n// REGISTER OUR ROUTES -------------------------------\n// all of our routes will be prefixed with /api\n// this should go AFTER body parser\napp.use('/api', apiRouter);\n\n// additional init stuff should go before hitting the routing\n\n// default index route\napp.get('/', (req, res) => {\n  res.send('hi');\n});\n\n// START THE SERVER\n// =============================================================================\nconst port = process.env.PORT || 9090;\napp.listen(port);\n\nconsole.log(`listening on: ${port}`);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597889746023
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
        "sourceFileName": "router.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar Posts = _interopRequireWildcard(require(\"./controllers/post_controller\"));\n\nvar UserController = _interopRequireWildcard(require(\"./controllers/user_controller\"));\n\nvar _passport = require(\"./services/passport\");\n\nvar _s = _interopRequireDefault(require(\"./services/s3\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.get('/', (req, res) => {\n  res.json({\n    message: 'welcome to our blog api!'\n  });\n});\nrouter.post('/signin', _passport.requireSignin, UserController.signin);\nrouter.post('/signup', UserController.signup);\nrouter.route('/posts').post(_passport.requireAuth, Posts.createPost).get(Posts.getPosts);\nrouter.route('/posts/:id').get(Posts.getPost).put(_passport.requireAuth, Posts.updatePost).delete(_passport.requireAuth, Posts.deletePost);\nrouter.get('/sign-s3', _s.default); /// your routes will go here\n\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJqc29uIiwibWVzc2FnZSIsInBvc3QiLCJyZXF1aXJlU2lnbmluIiwiVXNlckNvbnRyb2xsZXIiLCJzaWduaW4iLCJzaWdudXAiLCJyb3V0ZSIsInJlcXVpcmVBdXRoIiwiUG9zdHMiLCJjcmVhdGVQb3N0IiwiZ2V0UG9zdHMiLCJnZXRQb3N0IiwicHV0IiwidXBkYXRlUG9zdCIsImRlbGV0ZSIsImRlbGV0ZVBvc3QiLCJzaWduUzMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsc0JBQWY7QUFFQUEsTUFBTSxDQUFDQyxHQUFQLENBQVcsR0FBWCxFQUFnQixDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUM1QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBVDtBQUNELENBRkQ7QUFJQUwsTUFBTSxDQUFDTSxJQUFQLENBQVksU0FBWixFQUF1QkMsdUJBQXZCLEVBQXNDQyxjQUFjLENBQUNDLE1BQXJEO0FBRUFULE1BQU0sQ0FBQ00sSUFBUCxDQUFZLFNBQVosRUFBdUJFLGNBQWMsQ0FBQ0UsTUFBdEM7QUFFQVYsTUFBTSxDQUFDVyxLQUFQLENBQWEsUUFBYixFQUNHTCxJQURILENBQ1FNLHFCQURSLEVBQ3FCQyxLQUFLLENBQUNDLFVBRDNCLEVBRUdiLEdBRkgsQ0FFT1ksS0FBSyxDQUFDRSxRQUZiO0FBSUFmLE1BQU0sQ0FBQ1csS0FBUCxDQUFhLFlBQWIsRUFDR1YsR0FESCxDQUNPWSxLQUFLLENBQUNHLE9BRGIsRUFFR0MsR0FGSCxDQUVPTCxxQkFGUCxFQUVvQkMsS0FBSyxDQUFDSyxVQUYxQixFQUdHQyxNQUhILENBR1VQLHFCQUhWLEVBR3VCQyxLQUFLLENBQUNPLFVBSDdCO0FBS0FwQixNQUFNLENBQUNDLEdBQVAsQ0FBVyxVQUFYLEVBQXVCb0IsVUFBdkIsRSxDQUVBOztlQUVlckIsTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvam9uYWhrZXJzaGVuL0RvY3VtZW50cy9EYXJ0bW91dGgvMjBYL0NPU0NfNTIvcGxhdGZvcm0tYXBpLWpvbmFoa2Fsc25lcmtlcnNoZW4vc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0ICogYXMgUG9zdHMgZnJvbSAnLi9jb250cm9sbGVycy9wb3N0X2NvbnRyb2xsZXInO1xuaW1wb3J0ICogYXMgVXNlckNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVycy91c2VyX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgcmVxdWlyZUF1dGgsIHJlcXVpcmVTaWduaW4gfSBmcm9tICcuL3NlcnZpY2VzL3Bhc3Nwb3J0JztcbmltcG9ydCBzaWduUzMgZnJvbSAnLi9zZXJ2aWNlcy9zMyc7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHsgbWVzc2FnZTogJ3dlbGNvbWUgdG8gb3VyIGJsb2cgYXBpIScgfSk7XG59KTtcblxucm91dGVyLnBvc3QoJy9zaWduaW4nLCByZXF1aXJlU2lnbmluLCBVc2VyQ29udHJvbGxlci5zaWduaW4pO1xuXG5yb3V0ZXIucG9zdCgnL3NpZ251cCcsIFVzZXJDb250cm9sbGVyLnNpZ251cCk7XG5cbnJvdXRlci5yb3V0ZSgnL3Bvc3RzJylcbiAgLnBvc3QocmVxdWlyZUF1dGgsIFBvc3RzLmNyZWF0ZVBvc3QpXG4gIC5nZXQoUG9zdHMuZ2V0UG9zdHMpO1xuXG5yb3V0ZXIucm91dGUoJy9wb3N0cy86aWQnKVxuICAuZ2V0KFBvc3RzLmdldFBvc3QpXG4gIC5wdXQocmVxdWlyZUF1dGgsIFBvc3RzLnVwZGF0ZVBvc3QpXG4gIC5kZWxldGUocmVxdWlyZUF1dGgsIFBvc3RzLmRlbGV0ZVBvc3QpO1xuXG5yb3V0ZXIuZ2V0KCcvc2lnbi1zMycsIHNpZ25TMyk7XG5cbi8vLyB5b3VyIHJvdXRlcyB3aWxsIGdvIGhlcmVcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "router.js"
      ],
      "names": [
        "router",
        "get",
        "req",
        "res",
        "json",
        "message",
        "post",
        "requireSignin",
        "UserController",
        "signin",
        "signup",
        "route",
        "requireAuth",
        "Posts",
        "createPost",
        "getPosts",
        "getPost",
        "put",
        "updatePost",
        "delete",
        "deletePost",
        "signS3"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5BA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAAT;AACD,CAFD;AAIAL,MAAM,CAACM,IAAP,CAAY,SAAZ,EAAuBC,uBAAvB,EAAsCC,cAAc,CAACC,MAArD;AAEAT,MAAM,CAACM,IAAP,CAAY,SAAZ,EAAuBE,cAAc,CAACE,MAAtC;AAEAV,MAAM,CAACW,KAAP,CAAa,QAAb,EACGL,IADH,CACQM,qBADR,EACqBC,KAAK,CAACC,UAD3B,EAEGb,GAFH,CAEOY,KAAK,CAACE,QAFb;AAIAf,MAAM,CAACW,KAAP,CAAa,YAAb,EACGV,GADH,CACOY,KAAK,CAACG,OADb,EAEGC,GAFH,CAEOL,qBAFP,EAEoBC,KAAK,CAACK,UAF1B,EAGGC,MAHH,CAGUP,qBAHV,EAGuBC,KAAK,CAACO,UAH7B;AAKApB,MAAM,CAACC,GAAP,CAAW,UAAX,EAAuBoB,UAAvB,E,CAEA;;eAEerB,M",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
      "sourcesContent": [
        "import { Router } from 'express';\nimport * as Posts from './controllers/post_controller';\nimport * as UserController from './controllers/user_controller';\nimport { requireAuth, requireSignin } from './services/passport';\nimport signS3 from './services/s3';\n\nconst router = Router();\n\nrouter.get('/', (req, res) => {\n  res.json({ message: 'welcome to our blog api!' });\n});\n\nrouter.post('/signin', requireSignin, UserController.signin);\n\nrouter.post('/signup', UserController.signup);\n\nrouter.route('/posts')\n  .post(requireAuth, Posts.createPost)\n  .get(Posts.getPosts);\n\nrouter.route('/posts/:id')\n  .get(Posts.getPost)\n  .put(requireAuth, Posts.updatePost)\n  .delete(requireAuth, Posts.deletePost);\n\nrouter.get('/sign-s3', signS3);\n\n/// your routes will go here\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597890338304
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
        "sourceFileName": "post_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updatePost = exports.deletePost = exports.getPost = exports.getPosts = exports.createPost = void 0;\n\nvar _post_model = _interopRequireDefault(require(\"../models/post_model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst createPost = (req, res) => {\n  const post = new _post_model.default();\n  post.title = req.body.title;\n  post.tags = req.body.tags;\n  post.content = req.body.content;\n  post.coverUrl = req.body.coverUrl;\n  console.log(`author is: ${req.user.username}`);\n  post.author = req.user.username;\n  post.save().then(result => {\n    res.json({\n      message: 'Post created!'\n    });\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  }); //   res.send('post should be created and returned');\n};\n\nexports.createPost = createPost;\n\nconst getPosts = (req, res) => {\n  _post_model.default.find({}).sort({\n    createdAt: -1\n  }).then(result => {\n    res.send(result);\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  }); //   res.send('posts should be returned');\n\n};\n\nexports.getPosts = getPosts;\n\nconst getPost = (req, res) => {\n  return _post_model.default.findById(req.params.id).then(result => {\n    res.send(result); // res.send('single post looked up');\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  });\n};\n\nexports.getPost = getPost;\n\nconst deletePost = (req, res) => {\n  return _post_model.default.remove({\n    _id: req.params.id\n  }).then(result => {\n    res.send(result);\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  }); //   res.send('delete a post here');\n};\n\nexports.deletePost = deletePost;\n\nconst updatePost = (req, res) => {\n  const fields = {\n    title: req.body.title,\n    tags: req.body.tags,\n    content: req.body.content,\n    coverUrl: req.body.coverUrl,\n    author: req.user\n  };\n  return _post_model.default.findOneAndUpdate({\n    _id: req.params.id\n  }, fields, {\n    new: true\n  }).then(result => {\n    res.send(result);\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  });\n};\n\nexports.updatePost = updatePost;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3RfY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJjcmVhdGVQb3N0IiwicmVxIiwicmVzIiwicG9zdCIsIlBvc3QiLCJ0aXRsZSIsImJvZHkiLCJ0YWdzIiwiY29udGVudCIsImNvdmVyVXJsIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJ1c2VybmFtZSIsImF1dGhvciIsInNhdmUiLCJ0aGVuIiwicmVzdWx0IiwianNvbiIsIm1lc3NhZ2UiLCJjYXRjaCIsImVycm9yIiwic3RhdHVzIiwiZ2V0UG9zdHMiLCJmaW5kIiwic29ydCIsImNyZWF0ZWRBdCIsInNlbmQiLCJnZXRQb3N0IiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsImRlbGV0ZVBvc3QiLCJyZW1vdmUiLCJfaWQiLCJ1cGRhdGVQb3N0IiwiZmllbGRzIiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRU8sTUFBTUEsVUFBVSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3RDLFFBQU1DLElBQUksR0FBRyxJQUFJQyxtQkFBSixFQUFiO0FBQ0FELEVBQUFBLElBQUksQ0FBQ0UsS0FBTCxHQUFhSixHQUFHLENBQUNLLElBQUosQ0FBU0QsS0FBdEI7QUFDQUYsRUFBQUEsSUFBSSxDQUFDSSxJQUFMLEdBQVlOLEdBQUcsQ0FBQ0ssSUFBSixDQUFTQyxJQUFyQjtBQUNBSixFQUFBQSxJQUFJLENBQUNLLE9BQUwsR0FBZVAsR0FBRyxDQUFDSyxJQUFKLENBQVNFLE9BQXhCO0FBQ0FMLEVBQUFBLElBQUksQ0FBQ00sUUFBTCxHQUFnQlIsR0FBRyxDQUFDSyxJQUFKLENBQVNHLFFBQXpCO0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLGNBQWFWLEdBQUcsQ0FBQ1csSUFBSixDQUFTQyxRQUFTLEVBQTVDO0FBQ0FWLEVBQUFBLElBQUksQ0FBQ1csTUFBTCxHQUFjYixHQUFHLENBQUNXLElBQUosQ0FBU0MsUUFBdkI7QUFF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R0FBdEQsRUFBcUV0QixJQUFyRSxDQUEyRUMsTUFBRCxJQUFZO0FBQzNGZixJQUFBQSxHQUFHLENBQUN5QixJQUFKLENBQVNWLE1BQVQ7QUFDRCxHQUZNLEVBR0pHLEtBSEksQ0FHR0MsS0FBRCxJQUFXO0FBQ2hCbkIsSUFBQUEsR0FBRyxDQUFDb0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JKLElBQWhCLENBQXFCO0FBQUVHLE1BQUFBO0FBQUYsS0FBckI7QUFDRCxHQUxJLENBQVA7QUFNRCxDQWRNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qb25haGtlcnNoZW4vRG9jdW1lbnRzL0RhcnRtb3V0aC8yMFgvQ09TQ181Mi9wbGF0Zm9ybS1hcGktam9uYWhrYWxzbmVya2Vyc2hlbi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBvc3QgZnJvbSAnLi4vbW9kZWxzL3Bvc3RfbW9kZWwnO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlUG9zdCA9IChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBwb3N0ID0gbmV3IFBvc3QoKTtcbiAgcG9zdC50aXRsZSA9IHJlcS5ib2R5LnRpdGxlO1xuICBwb3N0LnRhZ3MgPSByZXEuYm9keS50YWdzO1xuICBwb3N0LmNvbnRlbnQgPSByZXEuYm9keS5jb250ZW50O1xuICBwb3N0LmNvdmVyVXJsID0gcmVxLmJvZHkuY292ZXJVcmw7XG4gIGNvbnNvbGUubG9nKGBhdXRob3IgaXM6ICR7cmVxLnVzZXIudXNlcm5hbWV9YCk7XG4gIHBvc3QuYXV0aG9yID0gcmVxLnVzZXIudXNlcm5hbWU7XG5cbiAgcG9zdC5zYXZlKClcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGNyZWF0ZWQhJyB9KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3IgfSk7XG4gICAgfSk7XG4vLyAgIHJlcy5zZW5kKCdwb3N0IHNob3VsZCBiZSBjcmVhdGVkIGFuZCByZXR1cm5lZCcpO1xufTtcbmV4cG9ydCBjb25zdCBnZXRQb3N0cyA9IChyZXEsIHJlcykgPT4ge1xuICBQb3N0LmZpbmQoe30pLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3VsdCk7XG4gIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KTtcbiAgICB9KTtcbi8vICAgcmVzLnNlbmQoJ3Bvc3RzIHNob3VsZCBiZSByZXR1cm5lZCcpO1xufTtcbmV4cG9ydCBjb25zdCBnZXRQb3N0ID0gKHJlcSwgcmVzKSA9PiB7XG4gIHJldHVybiBQb3N0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3VsdCk7XG4gICAgLy8gcmVzLnNlbmQoJ3NpbmdsZSBwb3N0IGxvb2tlZCB1cCcpO1xuICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3IgfSk7XG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBvc3QgPSAocmVxLCByZXMpID0+IHtcbiAgcmV0dXJuIFBvc3QucmVtb3ZlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3VsdCk7XG4gIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KTtcbiAgICB9KTtcbi8vICAgcmVzLnNlbmQoJ2RlbGV0ZSBhIHBvc3QgaGVyZScpO1xufTtcbmV4cG9ydCBjb25zdCB1cGRhdGVQb3N0ID0gKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGZpZWxkcyA9IHtcbiAgICB0aXRsZTogcmVxLmJvZHkudGl0bGUsXG4gICAgdGFnczogcmVxLmJvZHkudGFncyxcbiAgICBjb250ZW50OiByZXEuYm9keS5jb250ZW50LFxuICAgIGNvdmVyVXJsOiByZXEuYm9keS5jb3ZlclVybCxcbiAgICBhdXRob3I6IHJlcS51c2VyLFxuICB9O1xuICByZXR1cm4gUG9zdC5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIGZpZWxkcywgeyBuZXc6IHRydWUgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgcmVzLnNlbmQocmVzdWx0KTtcbiAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yIH0pO1xuICAgIH0pO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "post_controller.js"
      ],
      "names": [
        "createPost",
        "req",
        "res",
        "post",
        "Post",
        "title",
        "body",
        "tags",
        "content",
        "coverUrl",
        "console",
        "log",
        "user",
        "username",
        "author",
        "save",
        "then",
        "result",
        "json",
        "message",
        "catch",
        "error",
        "status",
        "getPosts",
        "find",
        "sort",
        "createdAt",
        "send",
        "getPost",
        "findById",
        "params",
        "id",
        "deletePost",
        "remove",
        "_id",
        "updatePost",
        "fields",
        "findOneAndUpdate",
        "new"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEO,MAAMA,UAAU,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AACtC,QAAMC,IAAI,GAAG,IAAIC,mBAAJ,EAAb;AACAD,EAAAA,IAAI,CAACE,KAAL,GAAaJ,GAAG,CAACK,IAAJ,CAASD,KAAtB;AACAF,EAAAA,IAAI,CAACI,IAAL,GAAYN,GAAG,CAACK,IAAJ,CAASC,IAArB;AACAJ,EAAAA,IAAI,CAACK,OAAL,GAAeP,GAAG,CAACK,IAAJ,CAASE,OAAxB;AACAL,EAAAA,IAAI,CAACM,QAAL,GAAgBR,GAAG,CAACK,IAAJ,CAASG,QAAzB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAa,cAAaV,GAAG,CAACW,IAAJ,CAASC,QAAS,EAA5C;AACAV,EAAAA,IAAI,CAACW,MAAL,GAAcb,GAAG,CAACW,IAAJ,CAASC,QAAvB;AAEAV,EAAAA,IAAI,CAACY,IAAL,GACGC,IADH,CACSC,MAAD,IAAY;AAChBf,IAAAA,GAAG,CAACgB,IAAJ,CAAS;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAT;AACD,GAHH,EAIGC,KAJH,CAIUC,KAAD,IAAW;AAChBnB,IAAAA,GAAG,CAACoB,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEG,MAAAA;AAAF,KAArB;AACD,GANH,EATsC,CAgBxC;AACC,CAjBM;;;;AAkBA,MAAME,QAAQ,GAAG,CAACtB,GAAD,EAAMC,GAAN,KAAc;AACpCE,sBAAKoB,IAAL,CAAU,EAAV,EAAcC,IAAd,CAAmB;AAAEC,IAAAA,SAAS,EAAE,CAAC;AAAd,GAAnB,EAAsCV,IAAtC,CAA4CC,MAAD,IAAY;AACrDf,IAAAA,GAAG,CAACyB,IAAJ,CAASV,MAAT;AACD,GAFD,EAGGG,KAHH,CAGUC,KAAD,IAAW;AAChBnB,IAAAA,GAAG,CAACoB,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEG,MAAAA;AAAF,KAArB;AACD,GALH,EADoC,CAOtC;;AACC,CARM;;;;AASA,MAAMO,OAAO,GAAG,CAAC3B,GAAD,EAAMC,GAAN,KAAc;AACnC,SAAOE,oBAAKyB,QAAL,CAAc5B,GAAG,CAAC6B,MAAJ,CAAWC,EAAzB,EAA6Bf,IAA7B,CAAmCC,MAAD,IAAY;AACnDf,IAAAA,GAAG,CAACyB,IAAJ,CAASV,MAAT,EADmD,CAEnD;AACD,GAHM,EAIJG,KAJI,CAIGC,KAAD,IAAW;AAChBnB,IAAAA,GAAG,CAACoB,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEG,MAAAA;AAAF,KAArB;AACD,GANI,CAAP;AAOD,CARM;;;;AASA,MAAMW,UAAU,GAAG,CAAC/B,GAAD,EAAMC,GAAN,KAAc;AACtC,SAAOE,oBAAK6B,MAAL,CAAY;AAAEC,IAAAA,GAAG,EAAEjC,GAAG,CAAC6B,MAAJ,CAAWC;AAAlB,GAAZ,EAAoCf,IAApC,CAA0CC,MAAD,IAAY;AAC1Df,IAAAA,GAAG,CAACyB,IAAJ,CAASV,MAAT;AACD,GAFM,EAGJG,KAHI,CAGGC,KAAD,IAAW;AAChBnB,IAAAA,GAAG,CAACoB,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEG,MAAAA;AAAF,KAArB;AACD,GALI,CAAP,CADsC,CAOxC;AACC,CARM;;;;AASA,MAAMc,UAAU,GAAG,CAAClC,GAAD,EAAMC,GAAN,KAAc;AACtC,QAAMkC,MAAM,GAAG;AACb/B,IAAAA,KAAK,EAAEJ,GAAG,CAACK,IAAJ,CAASD,KADH;AAEbE,IAAAA,IAAI,EAAEN,GAAG,CAACK,IAAJ,CAASC,IAFF;AAGbC,IAAAA,OAAO,EAAEP,GAAG,CAACK,IAAJ,CAASE,OAHL;AAIbC,IAAAA,QAAQ,EAAER,GAAG,CAACK,IAAJ,CAASG,QAJN;AAKbK,IAAAA,MAAM,EAAEb,GAAG,CAACW;AALC,GAAf;AAOA,SAAOR,oBAAKiC,gBAAL,CAAsB;AAAEH,IAAAA,GAAG,EAAEjC,GAAG,CAAC6B,MAAJ,CAAWC;AAAlB,GAAtB,EAA8CK,MAA9C,EAAsD;AAAEE,IAAAA,GAAG,EAAE;AAAP,GAAtD,EAAqEtB,IAArE,CAA2EC,MAAD,IAAY;AAC3Ff,IAAAA,GAAG,CAACyB,IAAJ,CAASV,MAAT;AACD,GAFM,EAGJG,KAHI,CAGGC,KAAD,IAAW;AAChBnB,IAAAA,GAAG,CAACoB,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEG,MAAAA;AAAF,KAArB;AACD,GALI,CAAP;AAMD,CAdM",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "sourcesContent": [
        "import Post from '../models/post_model';\n\nexport const createPost = (req, res) => {\n  const post = new Post();\n  post.title = req.body.title;\n  post.tags = req.body.tags;\n  post.content = req.body.content;\n  post.coverUrl = req.body.coverUrl;\n  console.log(`author is: ${req.user.username}`);\n  post.author = req.user.username;\n\n  post.save()\n    .then((result) => {\n      res.json({ message: 'Post created!' });\n    })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n//   res.send('post should be created and returned');\n};\nexport const getPosts = (req, res) => {\n  Post.find({}).sort({ createdAt: -1 }).then((result) => {\n    res.send(result);\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n//   res.send('posts should be returned');\n};\nexport const getPost = (req, res) => {\n  return Post.findById(req.params.id).then((result) => {\n    res.send(result);\n    // res.send('single post looked up');\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n};\nexport const deletePost = (req, res) => {\n  return Post.remove({ _id: req.params.id }).then((result) => {\n    res.send(result);\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n//   res.send('delete a post here');\n};\nexport const updatePost = (req, res) => {\n  const fields = {\n    title: req.body.title,\n    tags: req.body.tags,\n    content: req.body.content,\n    coverUrl: req.body.coverUrl,\n    author: req.user,\n  };\n  return Post.findOneAndUpdate({ _id: req.params.id }, fields, { new: true }).then((result) => {\n    res.send(result);\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597636486130
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
        "sourceFileName": "post_model.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// create a PostSchema with a title field\nconst PostSchema = new _mongoose.Schema({\n  title: String,\n  tags: String,\n  content: String,\n  coverUrl: String,\n  author: String\n}, {\n  toObject: {\n    virtuals: true\n  },\n  toJSON: {\n    virtuals: true\n  },\n  timestamps: true\n});\nPostSchema.virtual('score').get(function scoreCalc() {\n  return this.upvotes - this.downvotes;\n}); // create model class\n\nconst PostModel = _mongoose.default.model('Post', PostSchema); // create PostModel class from schema\n\n\nvar _default = PostModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3RfbW9kZWwuanMiXSwibmFtZXMiOlsiUG9zdFNjaGVtYSIsIlNjaGVtYSIsInRpdGxlIiwiU3RyaW5nIiwidGFncyIsImNvbnRlbnQiLCJjb3ZlclVybCIsImF1dGhvciIsInRvT2JqZWN0IiwidmlydHVhbHMiLCJ0b0pTT04iLCJ0aW1lc3RhbXBzIiwidmlydHVhbCIsImdldCIsInNjb3JlQ2FsYyIsInVwdm90ZXMiLCJkb3dudm90ZXMiLCJQb3N0TW9kZWwiLCJtb25nb29zZSIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7OztBQUVBO0FBRUEsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDNUJDLEVBQUFBLEtBQUssRUFBRUMsTUFEcUI7QUFFNUJDLEVBQUFBLElBQUksRUFBRUQsTUFGc0I7QUFHNUJFLEVBQUFBLE9BQU8sRUFBRUYsTUFIbUI7QUFJNUJHLEVBQUFBLFFBQVEsRUFBRUgsTUFKa0I7QUFLNUJJLEVBQUFBLE1BQU0sRUFBRUo7QUFMb0IsQ0FBWCxFQU1oQjtBQUNESyxFQUFBQSxRQUFRLEVBQUU7QUFBRUMsSUFBQUEsUUFBUSxFQUFFO0FBQVosR0FEVDtBQUVEQyxFQUFBQSxNQUFNLEVBQUU7QUFBRUQsSUFBQUEsUUFBUSxFQUFFO0FBQVosR0FGUDtBQUdERSxFQUFBQSxVQUFVLEVBQUU7QUFIWCxDQU5nQixDQUFuQjtBQVlBWCxVQUFVLENBQUNZLE9BQVgsQ0FBbUIsT0FBbkIsRUFBNEJDLEdBQTVCLENBQWdDLFNBQVNDLFNBQVQsR0FBcUI7QUFDbkQsU0FBTyxLQUFLQyxPQUFMLEdBQWUsS0FBS0MsU0FBM0I7QUFDRCxDQUZELEUsQ0FJQTs7QUFDQSxNQUFNQyxTQUFTLEdBQUdDLGtCQUFTQyxLQUFULENBQWUsTUFBZixFQUF1Qm5CLFVBQXZCLENBQWxCLEMsQ0FFQTs7O2VBRWVpQixTIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qb25haGtlcnNoZW4vRG9jdW1lbnRzL0RhcnRtb3V0aC8yMFgvQ09TQ181Mi9wbGF0Zm9ybS1hcGktam9uYWhrYWxzbmVya2Vyc2hlbi9zcmMvbW9kZWxzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEgfSBmcm9tICdtb25nb29zZSc7XG5cbi8vIGNyZWF0ZSBhIFBvc3RTY2hlbWEgd2l0aCBhIHRpdGxlIGZpZWxkXG5cbmNvbnN0IFBvc3RTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgdGl0bGU6IFN0cmluZyxcbiAgdGFnczogU3RyaW5nLFxuICBjb250ZW50OiBTdHJpbmcsXG4gIGNvdmVyVXJsOiBTdHJpbmcsXG4gIGF1dGhvcjogU3RyaW5nLFxufSwge1xuICB0b09iamVjdDogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB0b0pTT046IHsgdmlydHVhbHM6IHRydWUgfSxcbiAgdGltZXN0YW1wczogdHJ1ZSxcbn0pO1xuXG5Qb3N0U2NoZW1hLnZpcnR1YWwoJ3Njb3JlJykuZ2V0KGZ1bmN0aW9uIHNjb3JlQ2FsYygpIHtcbiAgcmV0dXJuIHRoaXMudXB2b3RlcyAtIHRoaXMuZG93bnZvdGVzO1xufSk7XG5cbi8vIGNyZWF0ZSBtb2RlbCBjbGFzc1xuY29uc3QgUG9zdE1vZGVsID0gbW9uZ29vc2UubW9kZWwoJ1Bvc3QnLCBQb3N0U2NoZW1hKTtcblxuLy8gY3JlYXRlIFBvc3RNb2RlbCBjbGFzcyBmcm9tIHNjaGVtYVxuXG5leHBvcnQgZGVmYXVsdCBQb3N0TW9kZWw7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "post_model.js"
      ],
      "names": [
        "PostSchema",
        "Schema",
        "title",
        "String",
        "tags",
        "content",
        "coverUrl",
        "author",
        "toObject",
        "virtuals",
        "toJSON",
        "timestamps",
        "virtual",
        "get",
        "scoreCalc",
        "upvotes",
        "downvotes",
        "PostModel",
        "mongoose",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;;;;;AAEA;AAEA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,KAAK,EAAEC,MADqB;AAE5BC,EAAAA,IAAI,EAAED,MAFsB;AAG5BE,EAAAA,OAAO,EAAEF,MAHmB;AAI5BG,EAAAA,QAAQ,EAAEH,MAJkB;AAK5BI,EAAAA,MAAM,EAAEJ;AALoB,CAAX,EAMhB;AACDK,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GADT;AAEDC,EAAAA,MAAM,EAAE;AAAED,IAAAA,QAAQ,EAAE;AAAZ,GAFP;AAGDE,EAAAA,UAAU,EAAE;AAHX,CANgB,CAAnB;AAYAX,UAAU,CAACY,OAAX,CAAmB,OAAnB,EAA4BC,GAA5B,CAAgC,SAASC,SAAT,GAAqB;AACnD,SAAO,KAAKC,OAAL,GAAe,KAAKC,SAA3B;AACD,CAFD,E,CAIA;;AACA,MAAMC,SAAS,GAAGC,kBAASC,KAAT,CAAe,MAAf,EAAuBnB,UAAvB,CAAlB,C,CAEA;;;eAEeiB,S",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "sourcesContent": [
        "import mongoose, { Schema } from 'mongoose';\n\n// create a PostSchema with a title field\n\nconst PostSchema = new Schema({\n  title: String,\n  tags: String,\n  content: String,\n  coverUrl: String,\n  author: String,\n}, {\n  toObject: { virtuals: true },\n  toJSON: { virtuals: true },\n  timestamps: true,\n});\n\nPostSchema.virtual('score').get(function scoreCalc() {\n  return this.upvotes - this.downvotes;\n});\n\n// create model class\nconst PostModel = mongoose.model('Post', PostSchema);\n\n// create PostModel class from schema\n\nexport default PostModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597636534419
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/router.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
        "sourceFileName": "router.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar Posts = _interopRequireWildcard(require(\"./controllers/post_controller\"));\n\nvar UserController = _interopRequireWildcard(require(\"./controllers/user_controller\"));\n\nvar _passport = require(\"./services/passport\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.get('/', (req, res) => {\n  res.json({\n    message: 'welcome to our blog api!'\n  });\n});\nrouter.post('/signin', _passport.requireSignin, UserController.signin);\nrouter.post('/signup', UserController.signup);\nrouter.route('/posts').post(_passport.requireAuth, Posts.createPost).get(Posts.getPosts);\nrouter.route('/posts/:id').get(Posts.getPost).put(_passport.requireAuth, Posts.updatePost).delete(_passport.requireAuth, Posts.deletePost); /// your routes will go here\n\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJqc29uIiwibWVzc2FnZSIsInBvc3QiLCJyZXF1aXJlU2lnbmluIiwiVXNlckNvbnRyb2xsZXIiLCJzaWduaW4iLCJzaWdudXAiLCJyb3V0ZSIsInJlcXVpcmVBdXRoIiwiUG9zdHMiLCJjcmVhdGVQb3N0IiwiZ2V0UG9zdHMiLCJnZXRQb3N0IiwicHV0IiwidXBkYXRlUG9zdCIsImRlbGV0ZSIsImRlbGV0ZVBvc3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLHNCQUFmO0FBRUFBLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLEdBQVgsRUFBZ0IsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDNUJBLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTO0FBQUVDLElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBQVQ7QUFDRCxDQUZEO0FBSUFMLE1BQU0sQ0FBQ00sSUFBUCxDQUFZLFNBQVosRUFBdUJDLHVCQUF2QixFQUFzQ0MsY0FBYyxDQUFDQyxNQUFyRDtBQUVBVCxNQUFNLENBQUNNLElBQVAsQ0FBWSxTQUFaLEVBQXVCRSxjQUFjLENBQUNFLE1BQXRDO0FBRUFWLE1BQU0sQ0FBQ1csS0FBUCxDQUFhLFFBQWIsRUFDR0wsSUFESCxDQUNRTSxxQkFEUixFQUNxQkMsS0FBSyxDQUFDQyxVQUQzQixFQUVHYixHQUZILENBRU9ZLEtBQUssQ0FBQ0UsUUFGYjtBQUlBZixNQUFNLENBQUNXLEtBQVAsQ0FBYSxZQUFiLEVBQ0dWLEdBREgsQ0FDT1ksS0FBSyxDQUFDRyxPQURiLEVBRUdDLEdBRkgsQ0FFT0wscUJBRlAsRUFFb0JDLEtBQUssQ0FBQ0ssVUFGMUIsRUFHR0MsTUFISCxDQUdVUCxxQkFIVixFQUd1QkMsS0FBSyxDQUFDTyxVQUg3QixFLENBS0E7O2VBRWVwQixNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qb25haGtlcnNoZW4vRG9jdW1lbnRzL0RhcnRtb3V0aC8yMFgvQ09TQ181Mi9wbGF0Zm9ybS1hcGktam9uYWhrYWxzbmVya2Vyc2hlbi9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgKiBhcyBQb3N0cyBmcm9tICcuL2NvbnRyb2xsZXJzL3Bvc3RfY29udHJvbGxlcic7XG5pbXBvcnQgKiBhcyBVc2VyQ29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXJzL3VzZXJfY29udHJvbGxlcic7XG5pbXBvcnQgeyByZXF1aXJlQXV0aCwgcmVxdWlyZVNpZ25pbiB9IGZyb20gJy4vc2VydmljZXMvcGFzc3BvcnQnO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7IG1lc3NhZ2U6ICd3ZWxjb21lIHRvIG91ciBibG9nIGFwaSEnIH0pO1xufSk7XG5cbnJvdXRlci5wb3N0KCcvc2lnbmluJywgcmVxdWlyZVNpZ25pbiwgVXNlckNvbnRyb2xsZXIuc2lnbmluKTtcblxucm91dGVyLnBvc3QoJy9zaWdudXAnLCBVc2VyQ29udHJvbGxlci5zaWdudXApO1xuXG5yb3V0ZXIucm91dGUoJy9wb3N0cycpXG4gIC5wb3N0KHJlcXVpcmVBdXRoLCBQb3N0cy5jcmVhdGVQb3N0KVxuICAuZ2V0KFBvc3RzLmdldFBvc3RzKTtcblxucm91dGVyLnJvdXRlKCcvcG9zdHMvOmlkJylcbiAgLmdldChQb3N0cy5nZXRQb3N0KVxuICAucHV0KHJlcXVpcmVBdXRoLCBQb3N0cy51cGRhdGVQb3N0KVxuICAuZGVsZXRlKHJlcXVpcmVBdXRoLCBQb3N0cy5kZWxldGVQb3N0KTtcblxuLy8vIHlvdXIgcm91dGVzIHdpbGwgZ28gaGVyZVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "router.js"
      ],
      "names": [
        "router",
        "get",
        "req",
        "res",
        "json",
        "message",
        "post",
        "requireSignin",
        "UserController",
        "signin",
        "signup",
        "route",
        "requireAuth",
        "Posts",
        "createPost",
        "getPosts",
        "getPost",
        "put",
        "updatePost",
        "delete",
        "deletePost"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5BA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAAT;AACD,CAFD;AAIAL,MAAM,CAACM,IAAP,CAAY,SAAZ,EAAuBC,uBAAvB,EAAsCC,cAAc,CAACC,MAArD;AAEAT,MAAM,CAACM,IAAP,CAAY,SAAZ,EAAuBE,cAAc,CAACE,MAAtC;AAEAV,MAAM,CAACW,KAAP,CAAa,QAAb,EACGL,IADH,CACQM,qBADR,EACqBC,KAAK,CAACC,UAD3B,EAEGb,GAFH,CAEOY,KAAK,CAACE,QAFb;AAIAf,MAAM,CAACW,KAAP,CAAa,YAAb,EACGV,GADH,CACOY,KAAK,CAACG,OADb,EAEGC,GAFH,CAEOL,qBAFP,EAEoBC,KAAK,CAACK,UAF1B,EAGGC,MAHH,CAGUP,qBAHV,EAGuBC,KAAK,CAACO,UAH7B,E,CAKA;;eAEepB,M",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/",
      "sourcesContent": [
        "import { Router } from 'express';\nimport * as Posts from './controllers/post_controller';\nimport * as UserController from './controllers/user_controller';\nimport { requireAuth, requireSignin } from './services/passport';\n\nconst router = Router();\n\nrouter.get('/', (req, res) => {\n  res.json({ message: 'welcome to our blog api!' });\n});\n\nrouter.post('/signin', requireSignin, UserController.signin);\n\nrouter.post('/signup', UserController.signup);\n\nrouter.route('/posts')\n  .post(requireAuth, Posts.createPost)\n  .get(Posts.getPosts);\n\nrouter.route('/posts/:id')\n  .get(Posts.getPost)\n  .put(requireAuth, Posts.updatePost)\n  .delete(requireAuth, Posts.deletePost);\n\n/// your routes will go here\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597599258930
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/post_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
        "sourceFileName": "post_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updatePost = exports.deletePost = exports.getPost = exports.getPosts = exports.createPost = void 0;\n\nvar _post_model = _interopRequireDefault(require(\"../models/post_model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst createPost = (req, res) => {\n  const post = new _post_model.default();\n  post.title = req.body.title;\n  post.tags = req.body.tags;\n  post.content = req.body.content;\n  post.coverUrl = req.body.coverUrl;\n  console.log(`author is: ${req.user.username}`);\n  post.author = req.user.username;\n  post.save().then(result => {\n    res.json({\n      message: 'Post created!'\n    });\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  }); //   res.send('post should be created and returned');\n};\n\nexports.createPost = createPost;\n\nconst getPosts = (req, res) => {\n  _post_model.default.find({}).sort({\n    createdAt: -1\n  }).then(result => {\n    res.send(result);\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  }); //   res.send('posts should be returned');\n\n};\n\nexports.getPosts = getPosts;\n\nconst getPost = (req, res) => {\n  return _post_model.default.findById(req.params.id).then(result => {\n    res.send(result); // res.send('single post looked up');\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  });\n};\n\nexports.getPost = getPost;\n\nconst deletePost = (req, res) => {\n  return _post_model.default.remove({\n    _id: req.params.id\n  }).then(result => {\n    res.send(result);\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  }); //   res.send('delete a post here');\n};\n\nexports.deletePost = deletePost;\n\nconst updatePost = (req, res) => {\n  const fields = {\n    title: req.body.title,\n    tags: req.body.tags,\n    content: req.body.content,\n    coverUrl: req.body.coverUrl,\n    author: req.user\n  };\n  return _post_model.default.findOneAndUpdate({\n    _id: req.params.id\n  }, fields, {\n    new: true\n  }).then(result => {\n    res.send(result);\n  }).catch(error => {\n    res.status(500).json({\n      error\n    });\n  });\n};\n\nexports.updatePost = updatePost;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3RfY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJjcmVhdGVQb3N0IiwicmVxIiwicmVzIiwicG9zdCIsIlBvc3QiLCJ0aXRsZSIsImJvZHkiLCJ0YWdzIiwiY29udGVudCIsImNvdmVyVXJsIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJ1c2VybmFtZSIsImF1dGhvciIsInNhdmUiLCJ0aGVuIiwicmVzdWx0IiwianNvbiIsIm1lc3NhZ2UiLCJjYXRjaCIsImVycm9yIiwic3RhdHVzIiwiZ2V0UG9zdHMiLCJmaW5kIiwic29ydCIsImNyZWF0ZWRBdCIsInNlbmQiLCJnZXRQb3N0IiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsImRlbGV0ZVBvc3QiLCJyZW1vdmUiLCJfaWQiLCJ1cGRhdGVQb3N0IiwiZmllbGRzIiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRU8sTUFBTUEsVUFBVSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3RDLFFBQU1DLElBQUksR0FBRyxJQUFJQyxtQkFBSixFQUFiO0FBQ0FELEVBQUFBLElBQUksQ0FBQ0UsS0FBTCxHQUFhSixHQUFHLENBQUNLLElBQUosQ0FBU0QsS0FBdEI7QUFDQUYsRUFBQUEsSUFBSSxDQUFDSSxJQUFMLEdBQVlOLEdBQUcsQ0FBQ0ssSUFBSixDQUFTQyxJQUFyQjtBQUNBSixFQUFBQSxJQUFJLENBQUNLLE9BQUwsR0FBZVAsR0FBRyxDQUFDSyxJQUFKLENBQVNFLE9BQXhCO0FBQ0FMLEVBQUFBLElBQUksQ0FBQ00sUUFBTCxHQUFnQlIsR0FBRyxDQUFDSyxJQUFKLENBQVNHLFFBQXpCO0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLGNBQWFWLEdBQUcsQ0FBQ1csSUFBSixDQUFTQyxRQUFTLEVBQTVDO0FBQ0FWLEVBQUFBLElBQUksQ0FBQ1csTUFBTCxHQUFjYixHQUFHLENBQUNXLElBQUosQ0FBU0MsUUFBdkI7QUFF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R0FBdEQsRUFBcUV0QixJQUFyRSxDQUEyRUMsTUFBRCxJQUFZO0FBQzNGZixJQUFBQSxHQUFHLENBQUN5QixJQUFKLENBQVNWLE1BQVQ7QUFDRCxHQUZNLEVBR0pHLEtBSEksQ0FHR0MsS0FBRCxJQUFXO0FBQ2hCbkIsSUFBQUEsR0FBRyxDQUFDb0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JKLElBQWhCLENBQXFCO0FBQUVHLE1BQUFBO0FBQUYsS0FBckI7QUFDRCxHQUxJLENBQVA7QUFNRCxDQWRNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qb25haGtlcnNoZW4vRG9jdW1lbnRzL0RhcnRtb3V0aC8yMFgvQ09TQ181Mi9wbGF0Zm9ybS1hcGktam9uYWhrYWxzbmVya2Vyc2hlbi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBvc3QgZnJvbSAnLi4vbW9kZWxzL3Bvc3RfbW9kZWwnO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlUG9zdCA9IChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBwb3N0ID0gbmV3IFBvc3QoKTtcbiAgcG9zdC50aXRsZSA9IHJlcS5ib2R5LnRpdGxlO1xuICBwb3N0LnRhZ3MgPSByZXEuYm9keS50YWdzO1xuICBwb3N0LmNvbnRlbnQgPSByZXEuYm9keS5jb250ZW50O1xuICBwb3N0LmNvdmVyVXJsID0gcmVxLmJvZHkuY292ZXJVcmw7XG4gIGNvbnNvbGUubG9nKGBhdXRob3IgaXM6ICR7cmVxLnVzZXIudXNlcm5hbWV9YCk7XG4gIHBvc3QuYXV0aG9yID0gcmVxLnVzZXIudXNlcm5hbWU7XG5cbiAgcG9zdC5zYXZlKClcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGNyZWF0ZWQhJyB9KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3IgfSk7XG4gICAgfSk7XG4vLyAgIHJlcy5zZW5kKCdwb3N0IHNob3VsZCBiZSBjcmVhdGVkIGFuZCByZXR1cm5lZCcpO1xufTtcbmV4cG9ydCBjb25zdCBnZXRQb3N0cyA9IChyZXEsIHJlcykgPT4ge1xuICBQb3N0LmZpbmQoe30pLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3VsdCk7XG4gIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KTtcbiAgICB9KTtcbi8vICAgcmVzLnNlbmQoJ3Bvc3RzIHNob3VsZCBiZSByZXR1cm5lZCcpO1xufTtcbmV4cG9ydCBjb25zdCBnZXRQb3N0ID0gKHJlcSwgcmVzKSA9PiB7XG4gIHJldHVybiBQb3N0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3VsdCk7XG4gICAgLy8gcmVzLnNlbmQoJ3NpbmdsZSBwb3N0IGxvb2tlZCB1cCcpO1xuICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3IgfSk7XG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBvc3QgPSAocmVxLCByZXMpID0+IHtcbiAgcmV0dXJuIFBvc3QucmVtb3ZlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3VsdCk7XG4gIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KTtcbiAgICB9KTtcbi8vICAgcmVzLnNlbmQoJ2RlbGV0ZSBhIHBvc3QgaGVyZScpO1xufTtcbmV4cG9ydCBjb25zdCB1cGRhdGVQb3N0ID0gKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGZpZWxkcyA9IHtcbiAgICB0aXRsZTogcmVxLmJvZHkudGl0bGUsXG4gICAgdGFnczogcmVxLmJvZHkudGFncyxcbiAgICBjb250ZW50OiByZXEuYm9keS5jb250ZW50LFxuICAgIGNvdmVyVXJsOiByZXEuYm9keS5jb3ZlclVybCxcbiAgICBhdXRob3I6IHJlcS51c2VyLFxuICB9O1xuICByZXR1cm4gUG9zdC5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIGZpZWxkcywgeyBuZXc6IHRydWUgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgcmVzLnNlbmQocmVzdWx0KTtcbiAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yIH0pO1xuICAgIH0pO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "post_controller.js"
      ],
      "names": [
        "createPost",
        "req",
        "res",
        "post",
        "Post",
        "title",
        "body",
        "tags",
        "content",
        "coverUrl",
        "console",
        "log",
        "user",
        "username",
        "author",
        "save",
        "then",
        "result",
        "json",
        "message",
        "catch",
        "error",
        "status",
        "getPosts",
        "find",
        "sort",
        "createdAt",
        "send",
        "getPost",
        "findById",
        "params",
        "id",
        "deletePost",
        "remove",
        "_id",
        "updatePost",
        "fields",
        "findOneAndUpdate",
        "new"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "sourcesContent": [
        "import Post from '../models/post_model';\n\nexport const createPost = (req, res) => {\n  const post = new Post();\n  post.title = req.body.title;\n  post.tags = req.body.tags;\n  post.content = req.body.content;\n  post.coverUrl = req.body.coverUrl;\n  console.log(`author is: ${req.user.username}`);\n  post.author = req.user.username;\n\n  post.save()\n    .then((result) => {\n      res.json({ message: 'Post created!' });\n    })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n//   res.send('post should be created and returned');\n};\nexport const getPosts = (req, res) => {\n  Post.find({}).sort({ createdAt: -1 }).then((result) => {\n    res.send(result);\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n//   res.send('posts should be returned');\n};\nexport const getPost = (req, res) => {\n  return Post.findById(req.params.id).then((result) => {\n    res.send(result);\n    // res.send('single post looked up');\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n};\nexport const deletePost = (req, res) => {\n  return Post.remove({ _id: req.params.id }).then((result) => {\n    res.send(result);\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n//   res.send('delete a post here');\n};\nexport const updatePost = (req, res) => {\n  const fields = {\n    title: req.body.title,\n    tags: req.body.tags,\n    content: req.body.content,\n    coverUrl: req.body.coverUrl,\n    author: req.user,\n  };\n  return Post.findOneAndUpdate({ _id: req.params.id }, fields, { new: true }).then((result) => {\n    res.send(result);\n  })\n    .catch((error) => {\n      res.status(500).json({ error });\n    });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597636486130
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/post_model.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
        "sourceFileName": "post_model.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// create a PostSchema with a title field\nconst PostSchema = new _mongoose.Schema({\n  title: String,\n  tags: String,\n  content: String,\n  coverUrl: String,\n  author: String\n}, {\n  toObject: {\n    virtuals: true\n  },\n  toJSON: {\n    virtuals: true\n  },\n  timestamps: true\n});\nPostSchema.virtual('score').get(function scoreCalc() {\n  return this.upvotes - this.downvotes;\n}); // create model class\n\nconst PostModel = _mongoose.default.model('Post', PostSchema); // create PostModel class from schema\n\n\nvar _default = PostModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3RfbW9kZWwuanMiXSwibmFtZXMiOlsiUG9zdFNjaGVtYSIsIlNjaGVtYSIsInRpdGxlIiwiU3RyaW5nIiwidGFncyIsImNvbnRlbnQiLCJjb3ZlclVybCIsImF1dGhvciIsInRvT2JqZWN0IiwidmlydHVhbHMiLCJ0b0pTT04iLCJ0aW1lc3RhbXBzIiwidmlydHVhbCIsImdldCIsInNjb3JlQ2FsYyIsInVwdm90ZXMiLCJkb3dudm90ZXMiLCJQb3N0TW9kZWwiLCJtb25nb29zZSIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7OztBQUVBO0FBRUEsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDNUJDLEVBQUFBLEtBQUssRUFBRUMsTUFEcUI7QUFFNUJDLEVBQUFBLElBQUksRUFBRUQsTUFGc0I7QUFHNUJFLEVBQUFBLE9BQU8sRUFBRUYsTUFIbUI7QUFJNUJHLEVBQUFBLFFBQVEsRUFBRUgsTUFKa0I7QUFLNUJJLEVBQUFBLE1BQU0sRUFBRUo7QUFMb0IsQ0FBWCxFQU1oQjtBQUNESyxFQUFBQSxRQUFRLEVBQUU7QUFBRUMsSUFBQUEsUUFBUSxFQUFFO0FBQVosR0FEVDtBQUVEQyxFQUFBQSxNQUFNLEVBQUU7QUFBRUQsSUFBQUEsUUFBUSxFQUFFO0FBQVosR0FGUDtBQUdERSxFQUFBQSxVQUFVLEVBQUU7QUFIWCxDQU5nQixDQUFuQjtBQVlBWCxVQUFVLENBQUNZLE9BQVgsQ0FBbUIsT0FBbkIsRUFBNEJDLEdBQTVCLENBQWdDLFNBQVNDLFNBQVQsR0FBcUI7QUFDbkQsU0FBTyxLQUFLQyxPQUFMLEdBQWUsS0FBS0MsU0FBM0I7QUFDRCxDQUZELEUsQ0FJQTs7QUFDQSxNQUFNQyxTQUFTLEdBQUdDLGtCQUFTQyxLQUFULENBQWUsTUFBZixFQUF1Qm5CLFVBQXZCLENBQWxCLEMsQ0FFQTs7O2VBRWVpQixTIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qb25haGtlcnNoZW4vRG9jdW1lbnRzL0RhcnRtb3V0aC8yMFgvQ09TQ181Mi9wbGF0Zm9ybS1hcGktam9uYWhrYWxzbmVya2Vyc2hlbi9zcmMvbW9kZWxzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEgfSBmcm9tICdtb25nb29zZSc7XG5cbi8vIGNyZWF0ZSBhIFBvc3RTY2hlbWEgd2l0aCBhIHRpdGxlIGZpZWxkXG5cbmNvbnN0IFBvc3RTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgdGl0bGU6IFN0cmluZyxcbiAgdGFnczogU3RyaW5nLFxuICBjb250ZW50OiBTdHJpbmcsXG4gIGNvdmVyVXJsOiBTdHJpbmcsXG4gIGF1dGhvcjogU3RyaW5nLFxufSwge1xuICB0b09iamVjdDogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB0b0pTT046IHsgdmlydHVhbHM6IHRydWUgfSxcbiAgdGltZXN0YW1wczogdHJ1ZSxcbn0pO1xuXG5Qb3N0U2NoZW1hLnZpcnR1YWwoJ3Njb3JlJykuZ2V0KGZ1bmN0aW9uIHNjb3JlQ2FsYygpIHtcbiAgcmV0dXJuIHRoaXMudXB2b3RlcyAtIHRoaXMuZG93bnZvdGVzO1xufSk7XG5cbi8vIGNyZWF0ZSBtb2RlbCBjbGFzc1xuY29uc3QgUG9zdE1vZGVsID0gbW9uZ29vc2UubW9kZWwoJ1Bvc3QnLCBQb3N0U2NoZW1hKTtcblxuLy8gY3JlYXRlIFBvc3RNb2RlbCBjbGFzcyBmcm9tIHNjaGVtYVxuXG5leHBvcnQgZGVmYXVsdCBQb3N0TW9kZWw7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "post_model.js"
      ],
      "names": [
        "PostSchema",
        "Schema",
        "title",
        "String",
        "tags",
        "content",
        "coverUrl",
        "author",
        "toObject",
        "virtuals",
        "toJSON",
        "timestamps",
        "virtual",
        "get",
        "scoreCalc",
        "upvotes",
        "downvotes",
        "PostModel",
        "mongoose",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;;;;;AAEA;AAEA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,KAAK,EAAEC,MADqB;AAE5BC,EAAAA,IAAI,EAAED,MAFsB;AAG5BE,EAAAA,OAAO,EAAEF,MAHmB;AAI5BG,EAAAA,QAAQ,EAAEH,MAJkB;AAK5BI,EAAAA,MAAM,EAAEJ;AALoB,CAAX,EAMhB;AACDK,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GADT;AAEDC,EAAAA,MAAM,EAAE;AAAED,IAAAA,QAAQ,EAAE;AAAZ,GAFP;AAGDE,EAAAA,UAAU,EAAE;AAHX,CANgB,CAAnB;AAYAX,UAAU,CAACY,OAAX,CAAmB,OAAnB,EAA4BC,GAA5B,CAAgC,SAASC,SAAT,GAAqB;AACnD,SAAO,KAAKC,OAAL,GAAe,KAAKC,SAA3B;AACD,CAFD,E,CAIA;;AACA,MAAMC,SAAS,GAAGC,kBAASC,KAAT,CAAe,MAAf,EAAuBnB,UAAvB,CAAlB,C,CAEA;;;eAEeiB,S",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "sourcesContent": [
        "import mongoose, { Schema } from 'mongoose';\n\n// create a PostSchema with a title field\n\nconst PostSchema = new Schema({\n  title: String,\n  tags: String,\n  content: String,\n  coverUrl: String,\n  author: String,\n}, {\n  toObject: { virtuals: true },\n  toJSON: { virtuals: true },\n  timestamps: true,\n});\n\nPostSchema.virtual('score').get(function scoreCalc() {\n  return this.upvotes - this.downvotes;\n});\n\n// create model class\nconst PostModel = mongoose.model('Post', PostSchema);\n\n// create PostModel class from schema\n\nexport default PostModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597636534419
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
        "sourceFileName": "user_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.signin = void 0;\n\nvar _jwtSimple = _interopRequireDefault(require(\"jwt-simple\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _user_model = _interopRequireDefault(require(\"../models/user_model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-shadow */\n\n/* eslint-disable consistent-return */\n_dotenv.default.config({\n  silent: true\n}); // and then the secret is usable this way:\n// process.env.AUTH_SECRET;\n\n\nconst signin = (req, res, next) => {\n  res.send({\n    token: tokenForUser(req.user)\n  });\n};\n\nexports.signin = signin;\n\nconst signup = (req, res, next) => {\n  const {\n    email\n  } = req.body;\n  const {\n    password\n  } = req.body; // is this right?\n\n  const {\n    username\n  } = req.body;\n  console.log(`value of next is ${next}`);\n  console.log(`email is${email}`);\n\n  if (!email || !password) {\n    return res.status(422).send('You must provide email and password');\n  }\n\n  console.log('before finding email');\n\n  _user_model.default.find({\n    email\n  }).then(result => {\n    console.log(`req.user is ${req.user}`);\n    console.log(`length of result is ${result.length}`);\n    console.log(result);\n\n    if (result.length === 0) {\n      console.log('length was 0');\n      const newUser = new _user_model.default();\n      newUser.email = email;\n      newUser.password = password;\n      newUser.username = username;\n      console.log(`username is ${username}`);\n      newUser.save().then(result => {\n        // res.json({ message: 'User created!' });\n        res.send({\n          token: tokenForUser(newUser),\n          user: newUser\n        });\n      }).catch(error => {\n        res.status(500).json({\n          error\n        });\n      });\n    } else {\n      console.log('result was length>1');\n      return res.status(422).send('Account already exists');\n    }\n  });\n}; // encodes a new token for a user object\n\n\nexports.signup = signup;\n\nfunction tokenForUser(user) {\n  const timestamp = new Date().getTime();\n  return _jwtSimple.default.encode({\n    sub: user.id,\n    iat: timestamp\n  }, process.env.AUTH_SECRET);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJfY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJzaWxlbnQiLCJzaWduaW4iLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsInRva2VuIiwidG9rZW5Gb3JVc2VyIiwidXNlciIsInNpZ251cCIsImVtYWlsIiwiYm9keSIsInBhc3N3b3JkIiwidXNlcm5hbWUiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwiVXNlciIsImZpbmQiLCJ0aGVuIiwicmVzdWx0IiwibGVuZ3RoIiwibmV3VXNlciIsInNhdmUiLCJjYXRjaCIsImVycm9yIiwianNvbiIsInRpbWVzdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwiand0IiwiZW5jb2RlIiwic3ViIiwiaWQiLCJpYXQiLCJwcm9jZXNzIiwiZW52IiwiQVVUSF9TRUNSRVQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUpBOztBQUNBO0FBS0FBLGdCQUFPQyxNQUFQLENBQWM7QUFBRUMsRUFBQUEsTUFBTSxFQUFFO0FBQVYsQ0FBZCxFLENBRUE7QUFDQTs7O0FBRU8sTUFBTUMsTUFBTSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQ3hDRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUztBQUFFQyxJQUFBQSxLQUFLLEVBQUVDLFlBQVksQ0FBQ0wsR0FBRyxDQUFDTSxJQUFMO0FBQXJCLEdBQVQ7QUFDRCxDQUZNOzs7O0FBSUEsTUFBTUMsTUFBTSxHQUFHLENBQUNQLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQ3hDLFFBQU07QUFBRU0sSUFBQUE7QUFBRixNQUFZUixHQUFHLENBQUNTLElBQXRCO0FBQ0EsUUFBTTtBQUFFQyxJQUFBQTtBQUFGLE1BQWVWLEdBQUcsQ0FBQ1MsSUFBekIsQ0FGd0MsQ0FFVDs7QUFDL0IsUUFBTTtBQUFFRSxJQUFBQTtBQUFGLE1BQWVYLEdBQUcsQ0FBQ1MsSUFBekI7QUFFQUcsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsb0JBQW1CWCxJQUFLLEVBQXJDO0FBQ0FVLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLFdBQVVMLEtBQU0sRUFBN0I7O0FBRUEsTUFBSSxDQUFDQSxLQUFELElBQVUsQ0FBQ0UsUUFBZixFQUF5QjtBQUN2QixXQUFPVCxHQUFHLENBQUNhLE1BQUosQ0FBVyxHQUFYLEVBQWdCWCxJQUFoQixDQUFxQixxQ0FBckIsQ0FBUDtBQUNEOztBQUVEUyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxzQkFBWjs7QUFDQUUsc0JBQUtDLElBQUwsQ0FBVTtBQUFFUixJQUFBQTtBQUFGLEdBQVYsRUFBcUJTLElBQXJCLENBQTJCQyxNQUFELElBQVk7QUFDcENOLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLGVBQWNiLEdBQUcsQ0FBQ00sSUFBSyxFQUFwQztBQUNBTSxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBYSx1QkFBc0JLLE1BQU0sQ0FBQ0MsTUFBTyxFQUFqRDtBQUNBUCxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUssTUFBWjs7QUFDQSxRQUFJQSxNQUFNLENBQUNDLE1BQVAsS0FBa0IsQ0FBdEIsRUFBeUI7QUFDdkJQLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGNBQVo7QUFDQSxZQUFNTyxPQUFPLEdBQUcsSUFBSUwsbUJBQUosRUFBaEI7QUFDQUssTUFBQUEsT0FBTyxDQUFDWixLQUFSLEdBQWdCQSxLQUFoQjtBQUNBWSxNQUFBQSxPQUFPLENBQUNWLFFBQVIsR0FBbUJBLFFBQW5CO0FBQ0FVLE1BQUFBLE9BQU8sQ0FBQ1QsUUFBUixHQUFtQkEsUUFBbkI7QUFDQUMsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsZUFBY0YsUUFBUyxFQUFwQztBQUNBUyxNQUFBQSxPQUFPLENBQUNDLElBQVIsR0FBZUosSUFBZixDQUFxQkMsTUFBRCxJQUFZO0FBQzlCO0FBQ0FqQixRQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUztBQUFFQyxVQUFBQSxLQUFLLEVBQUVDLFlBQVksQ0FBQ2UsT0FBRCxDQUFyQjtBQUFnQ2QsVUFBQUEsSUFBSSxFQUFFYztBQUF0QyxTQUFUO0FBQ0QsT0FIRCxFQUlHRSxLQUpILENBSVVDLEtBQUQsSUFBVztBQUNoQnRCLFFBQUFBLEdBQUcsQ0FBQ2EsTUFBSixDQUFXLEdBQVgsRUFBZ0JVLElBQWhCLENBQXFCO0FBQUVELFVBQUFBO0FBQUYsU0FBckI7QUFDRCxPQU5IO0FBT0QsS0FkRCxNQWNPO0FBQ0xYLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHFCQUFaO0FBQ0EsYUFBT1osR0FBRyxDQUFDYSxNQUFKLENBQVcsR0FBWCxFQUFnQlgsSUFBaEIsQ0FBcUIsd0JBQXJCLENBQVA7QUFDRDtBQUNGLEdBdEJEO0FBdUJELENBcENNLEMsQ0FzQ1A7Ozs7O0FBQ0EsU0FBU0UsWUFBVCxDQUFzQkMsSUFBdEIsRUFBNEI7QUFDMUIsUUFBTW1CLFNBQVMsR0FBRyxJQUFJQyxJQUFKLEdBQVdDLE9BQVgsRUFBbEI7QUFDQSxTQUFPQyxtQkFBSUMsTUFBSixDQUFXO0FBQUVDLElBQUFBLEdBQUcsRUFBRXhCLElBQUksQ0FBQ3lCLEVBQVo7QUFBZ0JDLElBQUFBLEdBQUcsRUFBRVA7QUFBckIsR0FBWCxFQUE2Q1EsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFdBQXpELENBQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvam9uYWhrZXJzaGVuL0RvY3VtZW50cy9EYXJ0bW91dGgvMjBYL0NPU0NfNTIvcGxhdGZvcm0tYXBpLWpvbmFoa2Fsc25lcmtlcnNoZW4vc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbmltcG9ydCBqd3QgZnJvbSAnand0LXNpbXBsZSc7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlcl9tb2RlbCc7XG5cbmRvdGVudi5jb25maWcoeyBzaWxlbnQ6IHRydWUgfSk7XG5cbi8vIGFuZCB0aGVuIHRoZSBzZWNyZXQgaXMgdXNhYmxlIHRoaXMgd2F5OlxuLy8gcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQ7XG5cbmV4cG9ydCBjb25zdCBzaWduaW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgcmVzLnNlbmQoeyB0b2tlbjogdG9rZW5Gb3JVc2VyKHJlcS51c2VyKSB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaWdudXAgPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgeyBlbWFpbCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IHsgcGFzc3dvcmQgfSA9IHJlcS5ib2R5OyAvLyBpcyB0aGlzIHJpZ2h0P1xuICBjb25zdCB7IHVzZXJuYW1lIH0gPSByZXEuYm9keTtcblxuICBjb25zb2xlLmxvZyhgdmFsdWUgb2YgbmV4dCBpcyAke25leHR9YCk7XG4gIGNvbnNvbGUubG9nKGBlbWFpbCBpcyR7ZW1haWx9YCk7XG5cbiAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLnNlbmQoJ1lvdSBtdXN0IHByb3ZpZGUgZW1haWwgYW5kIHBhc3N3b3JkJyk7XG4gIH1cblxuICBjb25zb2xlLmxvZygnYmVmb3JlIGZpbmRpbmcgZW1haWwnKTtcbiAgVXNlci5maW5kKHsgZW1haWwgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc29sZS5sb2coYHJlcS51c2VyIGlzICR7cmVxLnVzZXJ9YCk7XG4gICAgY29uc29sZS5sb2coYGxlbmd0aCBvZiByZXN1bHQgaXMgJHtyZXN1bHQubGVuZ3RofWApO1xuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdsZW5ndGggd2FzIDAnKTtcbiAgICAgIGNvbnN0IG5ld1VzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgbmV3VXNlci5lbWFpbCA9IGVtYWlsO1xuICAgICAgbmV3VXNlci5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgbmV3VXNlci51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgY29uc29sZS5sb2coYHVzZXJuYW1lIGlzICR7dXNlcm5hbWV9YCk7XG4gICAgICBuZXdVc2VyLnNhdmUoKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gcmVzLmpzb24oeyBtZXNzYWdlOiAnVXNlciBjcmVhdGVkIScgfSk7XG4gICAgICAgIHJlcy5zZW5kKHsgdG9rZW46IHRva2VuRm9yVXNlcihuZXdVc2VyKSwgdXNlcjogbmV3VXNlciB9KTtcbiAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCB3YXMgbGVuZ3RoPjEnKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQyMikuc2VuZCgnQWNjb3VudCBhbHJlYWR5IGV4aXN0cycpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBlbmNvZGVzIGEgbmV3IHRva2VuIGZvciBhIHVzZXIgb2JqZWN0XG5mdW5jdGlvbiB0b2tlbkZvclVzZXIodXNlcikge1xuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgcmV0dXJuIGp3dC5lbmNvZGUoeyBzdWI6IHVzZXIuaWQsIGlhdDogdGltZXN0YW1wIH0sIHByb2Nlc3MuZW52LkFVVEhfU0VDUkVUKTtcbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user_controller.js"
      ],
      "names": [
        "dotenv",
        "config",
        "silent",
        "signin",
        "req",
        "res",
        "next",
        "send",
        "token",
        "tokenForUser",
        "user",
        "signup",
        "email",
        "body",
        "password",
        "username",
        "console",
        "log",
        "status",
        "User",
        "find",
        "then",
        "result",
        "length",
        "newUser",
        "save",
        "catch",
        "error",
        "json",
        "timestamp",
        "Date",
        "getTime",
        "jwt",
        "encode",
        "sub",
        "id",
        "iat",
        "process",
        "env",
        "AUTH_SECRET"
      ],
      "mappings": ";;;;;;;AAEA;;AACA;;AACA;;;;AAJA;;AACA;AAKAA,gBAAOC,MAAP,CAAc;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAd,E,CAEA;AACA;;;AAEO,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxCD,EAAAA,GAAG,CAACE,IAAJ,CAAS;AAAEC,IAAAA,KAAK,EAAEC,YAAY,CAACL,GAAG,CAACM,IAAL;AAArB,GAAT;AACD,CAFM;;;;AAIA,MAAMC,MAAM,GAAG,CAACP,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxC,QAAM;AAAEM,IAAAA;AAAF,MAAYR,GAAG,CAACS,IAAtB;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAeV,GAAG,CAACS,IAAzB,CAFwC,CAET;;AAC/B,QAAM;AAAEE,IAAAA;AAAF,MAAeX,GAAG,CAACS,IAAzB;AAEAG,EAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBX,IAAK,EAArC;AACAU,EAAAA,OAAO,CAACC,GAAR,CAAa,WAAUL,KAAM,EAA7B;;AAEA,MAAI,CAACA,KAAD,IAAU,CAACE,QAAf,EAAyB;AACvB,WAAOT,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBX,IAAhB,CAAqB,qCAArB,CAAP;AACD;;AAEDS,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;;AACAE,sBAAKC,IAAL,CAAU;AAAER,IAAAA;AAAF,GAAV,EAAqBS,IAArB,CAA2BC,MAAD,IAAY;AACpCN,IAAAA,OAAO,CAACC,GAAR,CAAa,eAAcb,GAAG,CAACM,IAAK,EAApC;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAa,uBAAsBK,MAAM,CAACC,MAAO,EAAjD;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAYK,MAAZ;;AACA,QAAIA,MAAM,CAACC,MAAP,KAAkB,CAAtB,EAAyB;AACvBP,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,YAAMO,OAAO,GAAG,IAAIL,mBAAJ,EAAhB;AACAK,MAAAA,OAAO,CAACZ,KAAR,GAAgBA,KAAhB;AACAY,MAAAA,OAAO,CAACV,QAAR,GAAmBA,QAAnB;AACAU,MAAAA,OAAO,CAACT,QAAR,GAAmBA,QAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAa,eAAcF,QAAS,EAApC;AACAS,MAAAA,OAAO,CAACC,IAAR,GAAeJ,IAAf,CAAqBC,MAAD,IAAY;AAC9B;AACAjB,QAAAA,GAAG,CAACE,IAAJ,CAAS;AAAEC,UAAAA,KAAK,EAAEC,YAAY,CAACe,OAAD,CAArB;AAAgCd,UAAAA,IAAI,EAAEc;AAAtC,SAAT;AACD,OAHD,EAIGE,KAJH,CAIUC,KAAD,IAAW;AAChBtB,QAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBU,IAAhB,CAAqB;AAAED,UAAAA;AAAF,SAArB;AACD,OANH;AAOD,KAdD,MAcO;AACLX,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,aAAOZ,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBX,IAAhB,CAAqB,wBAArB,CAAP;AACD;AACF,GAtBD;AAuBD,CApCM,C,CAsCP;;;;;AACA,SAASE,YAAT,CAAsBC,IAAtB,EAA4B;AAC1B,QAAMmB,SAAS,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAlB;AACA,SAAOC,mBAAIC,MAAJ,CAAW;AAAEC,IAAAA,GAAG,EAAExB,IAAI,CAACyB,EAAZ;AAAgBC,IAAAA,GAAG,EAAEP;AAArB,GAAX,EAA6CQ,OAAO,CAACC,GAAR,CAAYC,WAAzD,CAAP;AACD",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "sourcesContent": [
        "/* eslint-disable no-shadow */\n/* eslint-disable consistent-return */\nimport jwt from 'jwt-simple';\nimport dotenv from 'dotenv';\nimport User from '../models/user_model';\n\ndotenv.config({ silent: true });\n\n// and then the secret is usable this way:\n// process.env.AUTH_SECRET;\n\nexport const signin = (req, res, next) => {\n  res.send({ token: tokenForUser(req.user) });\n};\n\nexport const signup = (req, res, next) => {\n  const { email } = req.body;\n  const { password } = req.body; // is this right?\n  const { username } = req.body;\n\n  console.log(`value of next is ${next}`);\n  console.log(`email is${email}`);\n\n  if (!email || !password) {\n    return res.status(422).send('You must provide email and password');\n  }\n\n  console.log('before finding email');\n  User.find({ email }).then((result) => {\n    console.log(`req.user is ${req.user}`);\n    console.log(`length of result is ${result.length}`);\n    console.log(result);\n    if (result.length === 0) {\n      console.log('length was 0');\n      const newUser = new User();\n      newUser.email = email;\n      newUser.password = password;\n      newUser.username = username;\n      console.log(`username is ${username}`);\n      newUser.save().then((result) => {\n        // res.json({ message: 'User created!' });\n        res.send({ token: tokenForUser(newUser), user: newUser });\n      })\n        .catch((error) => {\n          res.status(500).json({ error });\n        });\n    } else {\n      console.log('result was length>1');\n      return res.status(422).send('Account already exists');\n    }\n  });\n};\n\n// encodes a new token for a user object\nfunction tokenForUser(user) {\n  const timestamp = new Date().getTime();\n  return jwt.encode({ sub: user.id, iat: timestamp }, process.env.AUTH_SECRET);\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597640046232
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
        "sourceFileName": "user_model.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst UserSchema = new _mongoose.Schema({\n  email: {\n    type: String,\n    unique: true,\n    lowercase: true\n  },\n  password: {\n    type: String\n  },\n  username: {\n    type: String,\n    unique: true\n  }\n}, {\n  toObject: {\n    virtuals: true\n  },\n  toJSON: {\n    virtuals: true\n  },\n  timestamps: true\n}); // UserSchema.virtual('score').get(function scoreCalc() {\n//   return this.upvotes - this.downvotes;\n// });\n\nUserSchema.pre('save', function comparePassword(next) {\n  // this is a reference to our model\n  // the function runs in some other context so DO NOT bind it\n  console.log(`in backend, next value is ${next}`);\n  const user = this;\n\n  if (!user.isModified('password')) {\n    return next();\n  } // TODO: do stuff here\n\n\n  const salt = _bcryptjs.default.genSaltSync(10);\n\n  const hash = _bcryptjs.default.hashSync(user.password, salt); // overwrite plain text password with encrypted password\n\n\n  user.password = hash;\n  return next(); // when done run the **next** callback with no arguments\n  // call next with an error if you encounter one\n  // return next();\n}); //  note use of named function rather than arrow notation\n//  this arrow notation is lexically scoped and prevents binding scope, which mongoose relies on\n\nUserSchema.methods.comparePassword = function comparePassword(candidatePassword, callback) {\n  // return callback(null, comparisonResult) for success\n  // or callback(error) in the error case\n  const user = this;\n\n  _bcryptjs.default.compare(candidatePassword, user.password, (err, comparisonResult) => {\n    if (err) return callback(err);else {\n      console.log('no errors in comparing ');\n      return callback(null, comparisonResult);\n    }\n  });\n}; // create model class\n\n\nconst UserModel = _mongoose.default.model('User', UserSchema); // create PostModel class from schema\n\n\nvar _default = UserModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJfbW9kZWwuanMiXSwibmFtZXMiOlsiVXNlclNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInVuaXF1ZSIsImxvd2VyY2FzZSIsInBhc3N3b3JkIiwidXNlcm5hbWUiLCJ0b09iamVjdCIsInZpcnR1YWxzIiwidG9KU09OIiwidGltZXN0YW1wcyIsInByZSIsImNvbXBhcmVQYXNzd29yZCIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwidXNlciIsImlzTW9kaWZpZWQiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdFN5bmMiLCJoYXNoIiwiaGFzaFN5bmMiLCJtZXRob2RzIiwiY2FuZGlkYXRlUGFzc3dvcmQiLCJjYWxsYmFjayIsImNvbXBhcmUiLCJlcnIiLCJjb21wYXJpc29uUmVzdWx0IiwiVXNlck1vZGVsIiwibW9uZ29vc2UiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7OztBQUVBLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0FBQzVCQyxFQUFBQSxLQUFLLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxNQUFNLEVBQUUsSUFBeEI7QUFBOEJDLElBQUFBLFNBQVMsRUFBRTtBQUF6QyxHQURxQjtBQUU1QkMsRUFBQUEsUUFBUSxFQUFFO0FBQUVKLElBQUFBLElBQUksRUFBRUM7QUFBUixHQUZrQjtBQUc1QkksRUFBQUEsUUFBUSxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsTUFBTSxFQUFFO0FBQXhCO0FBSGtCLENBQVgsRUFJaEI7QUFDREksRUFBQUEsUUFBUSxFQUFFO0FBQUVDLElBQUFBLFFBQVEsRUFBRTtBQUFaLEdBRFQ7QUFFREMsRUFBQUEsTUFBTSxFQUFFO0FBQUVELElBQUFBLFFBQVEsRUFBRTtBQUFaLEdBRlA7QUFHREUsRUFBQUEsVUFBVSxFQUFFO0FBSFgsQ0FKZ0IsQ0FBbkIsQyxDQVVBO0FBQ0E7QUFDQTs7QUFFQVosVUFBVSxDQUFDYSxHQUFYLENBQWUsTUFBZixFQUF1QixTQUFTQyxlQUFULENBQXlCQyxJQUF6QixFQUErQjtBQUNwRDtBQUNBO0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLDZCQUE0QkYsSUFBSyxFQUE5QztBQUNBLFFBQU1HLElBQUksR0FBRyxJQUFiOztBQUNBLE1BQUksQ0FBQ0EsSUFBSSxDQUFDQyxVQUFMLENBQWdCLFVBQWhCLENBQUwsRUFBa0M7QUFDaEMsV0FBT0osSUFBSSxFQUFYO0FBQ0QsR0FQbUQsQ0FRcEQ7OztBQUNBLFFBQU1LLElBQUksR0FBR0Msa0JBQU9DLFdBQVAsQ0FBbUIsRUFBbkIsQ0FBYjs7QUFDQSxRQUFNQyxJQUFJLEdBQUdGLGtCQUFPRyxRQUFQLENBQWdCTixJQUFJLENBQUNYLFFBQXJCLEVBQStCYSxJQUEvQixDQUFiLENBVm9ELENBWXBEOzs7QUFDQUYsRUFBQUEsSUFBSSxDQUFDWCxRQUFMLEdBQWdCZ0IsSUFBaEI7QUFDQSxTQUFPUixJQUFJLEVBQVgsQ0Fkb0QsQ0FnQnBEO0FBQ0E7QUFDQTtBQUNELENBbkJELEUsQ0FxQkE7QUFDQTs7QUFDQWYsVUFBVSxDQUFDeUIsT0FBWCxDQUFtQlgsZUFBbkIsR0FBcUMsU0FBU0EsZUFBVCxDQUF5QlksaUJBQXpCLEVBQTRDQyxRQUE1QyxFQUFzRDtBQUN6RjtBQUNBO0FBQ0EsUUFBTVQsSUFBSSxHQUFHLElBQWI7O0FBQ0FHLG9CQUFPTyxPQUFQLENBQWVGLGlCQUFmLEVBQWtDUixJQUFJLENBQUNYLFFBQXZDLEVBQWlELENBQUNzQixHQUFELEVBQU1DLGdCQUFOLEtBQTJCO0FBQzFFLFFBQUlELEdBQUosRUFBUyxPQUFPRixRQUFRLENBQUNFLEdBQUQsQ0FBZixDQUFULEtBQ0s7QUFDSGIsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVkseUJBQVo7QUFDQSxhQUFPVSxRQUFRLENBQUMsSUFBRCxFQUFPRyxnQkFBUCxDQUFmO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FYRCxDLENBYUE7OztBQUNBLE1BQU1DLFNBQVMsR0FBR0Msa0JBQVNDLEtBQVQsQ0FBZSxNQUFmLEVBQXVCakMsVUFBdkIsQ0FBbEIsQyxDQUVBOzs7ZUFFZStCLFMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2pvbmFoa2Vyc2hlbi9Eb2N1bWVudHMvRGFydG1vdXRoLzIwWC9DT1NDXzUyL3BsYXRmb3JtLWFwaS1qb25haGthbHNuZXJrZXJzaGVuL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGVtYWlsOiB7IHR5cGU6IFN0cmluZywgdW5pcXVlOiB0cnVlLCBsb3dlcmNhc2U6IHRydWUgfSxcbiAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nIH0sXG4gIHVzZXJuYW1lOiB7IHR5cGU6IFN0cmluZywgdW5pcXVlOiB0cnVlIH0sXG59LCB7XG4gIHRvT2JqZWN0OiB7IHZpcnR1YWxzOiB0cnVlIH0sXG4gIHRvSlNPTjogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB0aW1lc3RhbXBzOiB0cnVlLFxufSk7XG5cbi8vIFVzZXJTY2hlbWEudmlydHVhbCgnc2NvcmUnKS5nZXQoZnVuY3Rpb24gc2NvcmVDYWxjKCkge1xuLy8gICByZXR1cm4gdGhpcy51cHZvdGVzIC0gdGhpcy5kb3dudm90ZXM7XG4vLyB9KTtcblxuVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmQobmV4dCkge1xuICAvLyB0aGlzIGlzIGEgcmVmZXJlbmNlIHRvIG91ciBtb2RlbFxuICAvLyB0aGUgZnVuY3Rpb24gcnVucyBpbiBzb21lIG90aGVyIGNvbnRleHQgc28gRE8gTk9UIGJpbmQgaXRcbiAgY29uc29sZS5sb2coYGluIGJhY2tlbmQsIG5leHQgdmFsdWUgaXMgJHtuZXh0fWApO1xuICBjb25zdCB1c2VyID0gdGhpcztcbiAgaWYgKCF1c2VyLmlzTW9kaWZpZWQoJ3Bhc3N3b3JkJykpIHtcbiAgICByZXR1cm4gbmV4dCgpO1xuICB9XG4gIC8vIFRPRE86IGRvIHN0dWZmIGhlcmVcbiAgY29uc3Qgc2FsdCA9IGJjcnlwdC5nZW5TYWx0U3luYygxMCk7XG4gIGNvbnN0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmModXNlci5wYXNzd29yZCwgc2FsdCk7XG5cbiAgLy8gb3ZlcndyaXRlIHBsYWluIHRleHQgcGFzc3dvcmQgd2l0aCBlbmNyeXB0ZWQgcGFzc3dvcmRcbiAgdXNlci5wYXNzd29yZCA9IGhhc2g7XG4gIHJldHVybiBuZXh0KCk7XG5cbiAgLy8gd2hlbiBkb25lIHJ1biB0aGUgKipuZXh0KiogY2FsbGJhY2sgd2l0aCBubyBhcmd1bWVudHNcbiAgLy8gY2FsbCBuZXh0IHdpdGggYW4gZXJyb3IgaWYgeW91IGVuY291bnRlciBvbmVcbiAgLy8gcmV0dXJuIG5leHQoKTtcbn0pO1xuXG4vLyAgbm90ZSB1c2Ugb2YgbmFtZWQgZnVuY3Rpb24gcmF0aGVyIHRoYW4gYXJyb3cgbm90YXRpb25cbi8vICB0aGlzIGFycm93IG5vdGF0aW9uIGlzIGxleGljYWxseSBzY29wZWQgYW5kIHByZXZlbnRzIGJpbmRpbmcgc2NvcGUsIHdoaWNoIG1vbmdvb3NlIHJlbGllcyBvblxuVXNlclNjaGVtYS5tZXRob2RzLmNvbXBhcmVQYXNzd29yZCA9IGZ1bmN0aW9uIGNvbXBhcmVQYXNzd29yZChjYW5kaWRhdGVQYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgLy8gcmV0dXJuIGNhbGxiYWNrKG51bGwsIGNvbXBhcmlzb25SZXN1bHQpIGZvciBzdWNjZXNzXG4gIC8vIG9yIGNhbGxiYWNrKGVycm9yKSBpbiB0aGUgZXJyb3IgY2FzZVxuICBjb25zdCB1c2VyID0gdGhpcztcbiAgYmNyeXB0LmNvbXBhcmUoY2FuZGlkYXRlUGFzc3dvcmQsIHVzZXIucGFzc3dvcmQsIChlcnIsIGNvbXBhcmlzb25SZXN1bHQpID0+IHtcbiAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdubyBlcnJvcnMgaW4gY29tcGFyaW5nICcpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGNvbXBhcmlzb25SZXN1bHQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBjcmVhdGUgbW9kZWwgY2xhc3NcbmNvbnN0IFVzZXJNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5cbi8vIGNyZWF0ZSBQb3N0TW9kZWwgY2xhc3MgZnJvbSBzY2hlbWFcblxuZXhwb3J0IGRlZmF1bHQgVXNlck1vZGVsO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "user_model.js"
      ],
      "names": [
        "UserSchema",
        "Schema",
        "email",
        "type",
        "String",
        "unique",
        "lowercase",
        "password",
        "username",
        "toObject",
        "virtuals",
        "toJSON",
        "timestamps",
        "pre",
        "comparePassword",
        "next",
        "console",
        "log",
        "user",
        "isModified",
        "salt",
        "bcrypt",
        "genSaltSync",
        "hash",
        "hashSync",
        "methods",
        "candidatePassword",
        "callback",
        "compare",
        "err",
        "comparisonResult",
        "UserModel",
        "mongoose",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,KAAK,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,MAAM,EAAE,IAAxB;AAA8BC,IAAAA,SAAS,EAAE;AAAzC,GADqB;AAE5BC,EAAAA,QAAQ,EAAE;AAAEJ,IAAAA,IAAI,EAAEC;AAAR,GAFkB;AAG5BI,EAAAA,QAAQ,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,MAAM,EAAE;AAAxB;AAHkB,CAAX,EAIhB;AACDI,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GADT;AAEDC,EAAAA,MAAM,EAAE;AAAED,IAAAA,QAAQ,EAAE;AAAZ,GAFP;AAGDE,EAAAA,UAAU,EAAE;AAHX,CAJgB,CAAnB,C,CAUA;AACA;AACA;;AAEAZ,UAAU,CAACa,GAAX,CAAe,MAAf,EAAuB,SAASC,eAAT,CAAyBC,IAAzB,EAA+B;AACpD;AACA;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAa,6BAA4BF,IAAK,EAA9C;AACA,QAAMG,IAAI,GAAG,IAAb;;AACA,MAAI,CAACA,IAAI,CAACC,UAAL,CAAgB,UAAhB,CAAL,EAAkC;AAChC,WAAOJ,IAAI,EAAX;AACD,GAPmD,CAQpD;;;AACA,QAAMK,IAAI,GAAGC,kBAAOC,WAAP,CAAmB,EAAnB,CAAb;;AACA,QAAMC,IAAI,GAAGF,kBAAOG,QAAP,CAAgBN,IAAI,CAACX,QAArB,EAA+Ba,IAA/B,CAAb,CAVoD,CAYpD;;;AACAF,EAAAA,IAAI,CAACX,QAAL,GAAgBgB,IAAhB;AACA,SAAOR,IAAI,EAAX,CAdoD,CAgBpD;AACA;AACA;AACD,CAnBD,E,CAqBA;AACA;;AACAf,UAAU,CAACyB,OAAX,CAAmBX,eAAnB,GAAqC,SAASA,eAAT,CAAyBY,iBAAzB,EAA4CC,QAA5C,EAAsD;AACzF;AACA;AACA,QAAMT,IAAI,GAAG,IAAb;;AACAG,oBAAOO,OAAP,CAAeF,iBAAf,EAAkCR,IAAI,CAACX,QAAvC,EAAiD,CAACsB,GAAD,EAAMC,gBAAN,KAA2B;AAC1E,QAAID,GAAJ,EAAS,OAAOF,QAAQ,CAACE,GAAD,CAAf,CAAT,KACK;AACHb,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,aAAOU,QAAQ,CAAC,IAAD,EAAOG,gBAAP,CAAf;AACD;AACF,GAND;AAOD,CAXD,C,CAaA;;;AACA,MAAMC,SAAS,GAAGC,kBAASC,KAAT,CAAe,MAAf,EAAuBjC,UAAvB,CAAlB,C,CAEA;;;eAEe+B,S",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "sourcesContent": [
        "import mongoose, { Schema } from 'mongoose';\nimport bcrypt from 'bcryptjs';\n\nconst UserSchema = new Schema({\n  email: { type: String, unique: true, lowercase: true },\n  password: { type: String },\n  username: { type: String, unique: true },\n}, {\n  toObject: { virtuals: true },\n  toJSON: { virtuals: true },\n  timestamps: true,\n});\n\n// UserSchema.virtual('score').get(function scoreCalc() {\n//   return this.upvotes - this.downvotes;\n// });\n\nUserSchema.pre('save', function comparePassword(next) {\n  // this is a reference to our model\n  // the function runs in some other context so DO NOT bind it\n  console.log(`in backend, next value is ${next}`);\n  const user = this;\n  if (!user.isModified('password')) {\n    return next();\n  }\n  // TODO: do stuff here\n  const salt = bcrypt.genSaltSync(10);\n  const hash = bcrypt.hashSync(user.password, salt);\n\n  // overwrite plain text password with encrypted password\n  user.password = hash;\n  return next();\n\n  // when done run the **next** callback with no arguments\n  // call next with an error if you encounter one\n  // return next();\n});\n\n//  note use of named function rather than arrow notation\n//  this arrow notation is lexically scoped and prevents binding scope, which mongoose relies on\nUserSchema.methods.comparePassword = function comparePassword(candidatePassword, callback) {\n  // return callback(null, comparisonResult) for success\n  // or callback(error) in the error case\n  const user = this;\n  bcrypt.compare(candidatePassword, user.password, (err, comparisonResult) => {\n    if (err) return callback(err);\n    else {\n      console.log('no errors in comparing ');\n      return callback(null, comparisonResult);\n    }\n  });\n};\n\n// create model class\nconst UserModel = mongoose.model('User', UserSchema);\n\n// create PostModel class from schema\n\nexport default UserModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597638953519
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/user_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
        "sourceFileName": "user_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.signin = void 0;\n\nvar _jwtSimple = _interopRequireDefault(require(\"jwt-simple\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _user_model = _interopRequireDefault(require(\"../models/user_model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-shadow */\n\n/* eslint-disable consistent-return */\n_dotenv.default.config({\n  silent: true\n}); // and then the secret is usable this way:\n// process.env.AUTH_SECRET;\n\n\nconst signin = (req, res, next) => {\n  res.send({\n    token: tokenForUser(req.user)\n  });\n};\n\nexports.signin = signin;\n\nconst signup = (req, res, next) => {\n  const {\n    email\n  } = req.body;\n  const {\n    password\n  } = req.body; // is this right?\n\n  const {\n    username\n  } = req.body;\n  console.log(`value of next is ${next}`);\n  console.log(`email is${email}`);\n\n  if (!email || !password) {\n    return res.status(422).send('You must provide email and password');\n  }\n\n  console.log('before finding email');\n\n  _user_model.default.find({\n    email\n  }).then(result => {\n    console.log(`req.user is ${req.user}`);\n    console.log(`length of result is ${result.length}`);\n    console.log(result);\n\n    if (result.length === 0) {\n      console.log('length was 0');\n      const newUser = new _user_model.default();\n      newUser.email = email;\n      newUser.password = password;\n      newUser.username = username;\n      console.log(`username is ${username}`);\n      newUser.save().then(result => {\n        // res.json({ message: 'User created!' });\n        res.send({\n          token: tokenForUser(newUser),\n          user: newUser\n        });\n      }).catch(error => {\n        res.status(500).json({\n          error\n        });\n      });\n    } else {\n      console.log('result was length>1');\n      return res.status(422).send('Account already exists');\n    }\n  });\n}; // encodes a new token for a user object\n\n\nexports.signup = signup;\n\nfunction tokenForUser(user) {\n  const timestamp = new Date().getTime();\n  return _jwtSimple.default.encode({\n    sub: user.id,\n    iat: timestamp\n  }, process.env.AUTH_SECRET);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJfY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJzaWxlbnQiLCJzaWduaW4iLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsInRva2VuIiwidG9rZW5Gb3JVc2VyIiwidXNlciIsInNpZ251cCIsImVtYWlsIiwiYm9keSIsInBhc3N3b3JkIiwidXNlcm5hbWUiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwiVXNlciIsImZpbmQiLCJ0aGVuIiwicmVzdWx0IiwibGVuZ3RoIiwibmV3VXNlciIsInNhdmUiLCJjYXRjaCIsImVycm9yIiwianNvbiIsInRpbWVzdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwiand0IiwiZW5jb2RlIiwic3ViIiwiaWQiLCJpYXQiLCJwcm9jZXNzIiwiZW52IiwiQVVUSF9TRUNSRVQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUpBOztBQUNBO0FBS0FBLGdCQUFPQyxNQUFQLENBQWM7QUFBRUMsRUFBQUEsTUFBTSxFQUFFO0FBQVYsQ0FBZCxFLENBRUE7QUFDQTs7O0FBRU8sTUFBTUMsTUFBTSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQ3hDRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUztBQUFFQyxJQUFBQSxLQUFLLEVBQUVDLFlBQVksQ0FBQ0wsR0FBRyxDQUFDTSxJQUFMO0FBQXJCLEdBQVQ7QUFDRCxDQUZNOzs7O0FBSUEsTUFBTUMsTUFBTSxHQUFHLENBQUNQLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQ3hDLFFBQU07QUFBRU0sSUFBQUE7QUFBRixNQUFZUixHQUFHLENBQUNTLElBQXRCO0FBQ0EsUUFBTTtBQUFFQyxJQUFBQTtBQUFGLE1BQWVWLEdBQUcsQ0FBQ1MsSUFBekIsQ0FGd0MsQ0FFVDs7QUFDL0IsUUFBTTtBQUFFRSxJQUFBQTtBQUFGLE1BQWVYLEdBQUcsQ0FBQ1MsSUFBekI7QUFFQUcsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsb0JBQW1CWCxJQUFLLEVBQXJDO0FBQ0FVLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLFdBQVVMLEtBQU0sRUFBN0I7O0FBRUEsTUFBSSxDQUFDQSxLQUFELElBQVUsQ0FBQ0UsUUFBZixFQUF5QjtBQUN2QixXQUFPVCxHQUFHLENBQUNhLE1BQUosQ0FBVyxHQUFYLEVBQWdCWCxJQUFoQixDQUFxQixxQ0FBckIsQ0FBUDtBQUNEOztBQUVEUyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxzQkFBWjs7QUFDQUUsc0JBQUtDLElBQUwsQ0FBVTtBQUFFUixJQUFBQTtBQUFGLEdBQVYsRUFBcUJTLElBQXJCLENBQTJCQyxNQUFELElBQVk7QUFDcENOLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLGVBQWNiLEdBQUcsQ0FBQ00sSUFBSyxFQUFwQztBQUNBTSxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBYSx1QkFBc0JLLE1BQU0sQ0FBQ0MsTUFBTyxFQUFqRDtBQUNBUCxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUssTUFBWjs7QUFDQSxRQUFJQSxNQUFNLENBQUNDLE1BQVAsS0FBa0IsQ0FBdEIsRUFBeUI7QUFDdkJQLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGNBQVo7QUFDQSxZQUFNTyxPQUFPLEdBQUcsSUFBSUwsbUJBQUosRUFBaEI7QUFDQUssTUFBQUEsT0FBTyxDQUFDWixLQUFSLEdBQWdCQSxLQUFoQjtBQUNBWSxNQUFBQSxPQUFPLENBQUNWLFFBQVIsR0FBbUJBLFFBQW5CO0FBQ0FVLE1BQUFBLE9BQU8sQ0FBQ1QsUUFBUixHQUFtQkEsUUFBbkI7QUFDQUMsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsZUFBY0YsUUFBUyxFQUFwQztBQUNBUyxNQUFBQSxPQUFPLENBQUNDLElBQVIsR0FBZUosSUFBZixDQUFxQkMsTUFBRCxJQUFZO0FBQzlCO0FBQ0FqQixRQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUztBQUFFQyxVQUFBQSxLQUFLLEVBQUVDLFlBQVksQ0FBQ2UsT0FBRCxDQUFyQjtBQUFnQ2QsVUFBQUEsSUFBSSxFQUFFYztBQUF0QyxTQUFUO0FBQ0QsT0FIRCxFQUlHRSxLQUpILENBSVVDLEtBQUQsSUFBVztBQUNoQnRCLFFBQUFBLEdBQUcsQ0FBQ2EsTUFBSixDQUFXLEdBQVgsRUFBZ0JVLElBQWhCLENBQXFCO0FBQUVELFVBQUFBO0FBQUYsU0FBckI7QUFDRCxPQU5IO0FBT0QsS0FkRCxNQWNPO0FBQ0xYLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHFCQUFaO0FBQ0EsYUFBT1osR0FBRyxDQUFDYSxNQUFKLENBQVcsR0FBWCxFQUFnQlgsSUFBaEIsQ0FBcUIsd0JBQXJCLENBQVA7QUFDRDtBQUNGLEdBdEJEO0FBdUJELENBcENNLEMsQ0FzQ1A7Ozs7O0FBQ0EsU0FBU0UsWUFBVCxDQUFzQkMsSUFBdEIsRUFBNEI7QUFDMUIsUUFBTW1CLFNBQVMsR0FBRyxJQUFJQyxJQUFKLEdBQVdDLE9BQVgsRUFBbEI7QUFDQSxTQUFPQyxtQkFBSUMsTUFBSixDQUFXO0FBQUVDLElBQUFBLEdBQUcsRUFBRXhCLElBQUksQ0FBQ3lCLEVBQVo7QUFBZ0JDLElBQUFBLEdBQUcsRUFBRVA7QUFBckIsR0FBWCxFQUE2Q1EsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFdBQXpELENBQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvam9uYWhrZXJzaGVuL0RvY3VtZW50cy9EYXJ0bW91dGgvMjBYL0NPU0NfNTIvcGxhdGZvcm0tYXBpLWpvbmFoa2Fsc25lcmtlcnNoZW4vc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbmltcG9ydCBqd3QgZnJvbSAnand0LXNpbXBsZSc7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlcl9tb2RlbCc7XG5cbmRvdGVudi5jb25maWcoeyBzaWxlbnQ6IHRydWUgfSk7XG5cbi8vIGFuZCB0aGVuIHRoZSBzZWNyZXQgaXMgdXNhYmxlIHRoaXMgd2F5OlxuLy8gcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQ7XG5cbmV4cG9ydCBjb25zdCBzaWduaW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgcmVzLnNlbmQoeyB0b2tlbjogdG9rZW5Gb3JVc2VyKHJlcS51c2VyKSB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaWdudXAgPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgeyBlbWFpbCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IHsgcGFzc3dvcmQgfSA9IHJlcS5ib2R5OyAvLyBpcyB0aGlzIHJpZ2h0P1xuICBjb25zdCB7IHVzZXJuYW1lIH0gPSByZXEuYm9keTtcblxuICBjb25zb2xlLmxvZyhgdmFsdWUgb2YgbmV4dCBpcyAke25leHR9YCk7XG4gIGNvbnNvbGUubG9nKGBlbWFpbCBpcyR7ZW1haWx9YCk7XG5cbiAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLnNlbmQoJ1lvdSBtdXN0IHByb3ZpZGUgZW1haWwgYW5kIHBhc3N3b3JkJyk7XG4gIH1cblxuICBjb25zb2xlLmxvZygnYmVmb3JlIGZpbmRpbmcgZW1haWwnKTtcbiAgVXNlci5maW5kKHsgZW1haWwgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc29sZS5sb2coYHJlcS51c2VyIGlzICR7cmVxLnVzZXJ9YCk7XG4gICAgY29uc29sZS5sb2coYGxlbmd0aCBvZiByZXN1bHQgaXMgJHtyZXN1bHQubGVuZ3RofWApO1xuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdsZW5ndGggd2FzIDAnKTtcbiAgICAgIGNvbnN0IG5ld1VzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgbmV3VXNlci5lbWFpbCA9IGVtYWlsO1xuICAgICAgbmV3VXNlci5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgbmV3VXNlci51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgY29uc29sZS5sb2coYHVzZXJuYW1lIGlzICR7dXNlcm5hbWV9YCk7XG4gICAgICBuZXdVc2VyLnNhdmUoKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gcmVzLmpzb24oeyBtZXNzYWdlOiAnVXNlciBjcmVhdGVkIScgfSk7XG4gICAgICAgIHJlcy5zZW5kKHsgdG9rZW46IHRva2VuRm9yVXNlcihuZXdVc2VyKSwgdXNlcjogbmV3VXNlciB9KTtcbiAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCB3YXMgbGVuZ3RoPjEnKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQyMikuc2VuZCgnQWNjb3VudCBhbHJlYWR5IGV4aXN0cycpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBlbmNvZGVzIGEgbmV3IHRva2VuIGZvciBhIHVzZXIgb2JqZWN0XG5mdW5jdGlvbiB0b2tlbkZvclVzZXIodXNlcikge1xuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgcmV0dXJuIGp3dC5lbmNvZGUoeyBzdWI6IHVzZXIuaWQsIGlhdDogdGltZXN0YW1wIH0sIHByb2Nlc3MuZW52LkFVVEhfU0VDUkVUKTtcbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user_controller.js"
      ],
      "names": [
        "dotenv",
        "config",
        "silent",
        "signin",
        "req",
        "res",
        "next",
        "send",
        "token",
        "tokenForUser",
        "user",
        "signup",
        "email",
        "body",
        "password",
        "username",
        "console",
        "log",
        "status",
        "User",
        "find",
        "then",
        "result",
        "length",
        "newUser",
        "save",
        "catch",
        "error",
        "json",
        "timestamp",
        "Date",
        "getTime",
        "jwt",
        "encode",
        "sub",
        "id",
        "iat",
        "process",
        "env",
        "AUTH_SECRET"
      ],
      "mappings": ";;;;;;;AAEA;;AACA;;AACA;;;;AAJA;;AACA;AAKAA,gBAAOC,MAAP,CAAc;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAd,E,CAEA;AACA;;;AAEO,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxCD,EAAAA,GAAG,CAACE,IAAJ,CAAS;AAAEC,IAAAA,KAAK,EAAEC,YAAY,CAACL,GAAG,CAACM,IAAL;AAArB,GAAT;AACD,CAFM;;;;AAIA,MAAMC,MAAM,GAAG,CAACP,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxC,QAAM;AAAEM,IAAAA;AAAF,MAAYR,GAAG,CAACS,IAAtB;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAeV,GAAG,CAACS,IAAzB,CAFwC,CAET;;AAC/B,QAAM;AAAEE,IAAAA;AAAF,MAAeX,GAAG,CAACS,IAAzB;AAEAG,EAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBX,IAAK,EAArC;AACAU,EAAAA,OAAO,CAACC,GAAR,CAAa,WAAUL,KAAM,EAA7B;;AAEA,MAAI,CAACA,KAAD,IAAU,CAACE,QAAf,EAAyB;AACvB,WAAOT,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBX,IAAhB,CAAqB,qCAArB,CAAP;AACD;;AAEDS,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;;AACAE,sBAAKC,IAAL,CAAU;AAAER,IAAAA;AAAF,GAAV,EAAqBS,IAArB,CAA2BC,MAAD,IAAY;AACpCN,IAAAA,OAAO,CAACC,GAAR,CAAa,eAAcb,GAAG,CAACM,IAAK,EAApC;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAa,uBAAsBK,MAAM,CAACC,MAAO,EAAjD;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAYK,MAAZ;;AACA,QAAIA,MAAM,CAACC,MAAP,KAAkB,CAAtB,EAAyB;AACvBP,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,YAAMO,OAAO,GAAG,IAAIL,mBAAJ,EAAhB;AACAK,MAAAA,OAAO,CAACZ,KAAR,GAAgBA,KAAhB;AACAY,MAAAA,OAAO,CAACV,QAAR,GAAmBA,QAAnB;AACAU,MAAAA,OAAO,CAACT,QAAR,GAAmBA,QAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAa,eAAcF,QAAS,EAApC;AACAS,MAAAA,OAAO,CAACC,IAAR,GAAeJ,IAAf,CAAqBC,MAAD,IAAY;AAC9B;AACAjB,QAAAA,GAAG,CAACE,IAAJ,CAAS;AAAEC,UAAAA,KAAK,EAAEC,YAAY,CAACe,OAAD,CAArB;AAAgCd,UAAAA,IAAI,EAAEc;AAAtC,SAAT;AACD,OAHD,EAIGE,KAJH,CAIUC,KAAD,IAAW;AAChBtB,QAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBU,IAAhB,CAAqB;AAAED,UAAAA;AAAF,SAArB;AACD,OANH;AAOD,KAdD,MAcO;AACLX,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,aAAOZ,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBX,IAAhB,CAAqB,wBAArB,CAAP;AACD;AACF,GAtBD;AAuBD,CApCM,C,CAsCP;;;;;AACA,SAASE,YAAT,CAAsBC,IAAtB,EAA4B;AAC1B,QAAMmB,SAAS,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAlB;AACA,SAAOC,mBAAIC,MAAJ,CAAW;AAAEC,IAAAA,GAAG,EAAExB,IAAI,CAACyB,EAAZ;AAAgBC,IAAAA,GAAG,EAAEP;AAArB,GAAX,EAA6CQ,OAAO,CAACC,GAAR,CAAYC,WAAzD,CAAP;AACD",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/controllers/",
      "sourcesContent": [
        "/* eslint-disable no-shadow */\n/* eslint-disable consistent-return */\nimport jwt from 'jwt-simple';\nimport dotenv from 'dotenv';\nimport User from '../models/user_model';\n\ndotenv.config({ silent: true });\n\n// and then the secret is usable this way:\n// process.env.AUTH_SECRET;\n\nexport const signin = (req, res, next) => {\n  res.send({ token: tokenForUser(req.user) });\n};\n\nexport const signup = (req, res, next) => {\n  const { email } = req.body;\n  const { password } = req.body; // is this right?\n  const { username } = req.body;\n\n  console.log(`value of next is ${next}`);\n  console.log(`email is${email}`);\n\n  if (!email || !password) {\n    return res.status(422).send('You must provide email and password');\n  }\n\n  console.log('before finding email');\n  User.find({ email }).then((result) => {\n    console.log(`req.user is ${req.user}`);\n    console.log(`length of result is ${result.length}`);\n    console.log(result);\n    if (result.length === 0) {\n      console.log('length was 0');\n      const newUser = new User();\n      newUser.email = email;\n      newUser.password = password;\n      newUser.username = username;\n      console.log(`username is ${username}`);\n      newUser.save().then((result) => {\n        // res.json({ message: 'User created!' });\n        res.send({ token: tokenForUser(newUser), user: newUser });\n      })\n        .catch((error) => {\n          res.status(500).json({ error });\n        });\n    } else {\n      console.log('result was length>1');\n      return res.status(422).send('Account already exists');\n    }\n  });\n};\n\n// encodes a new token for a user object\nfunction tokenForUser(user) {\n  const timestamp = new Date().getTime();\n  return jwt.encode({ sub: user.id, iat: timestamp }, process.env.AUTH_SECRET);\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597640046232
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/user_model.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
        "sourceFileName": "user_model.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst UserSchema = new _mongoose.Schema({\n  email: {\n    type: String,\n    unique: true,\n    lowercase: true\n  },\n  password: {\n    type: String\n  },\n  username: {\n    type: String,\n    unique: true\n  }\n}, {\n  toObject: {\n    virtuals: true\n  },\n  toJSON: {\n    virtuals: true\n  },\n  timestamps: true\n}); // UserSchema.virtual('score').get(function scoreCalc() {\n//   return this.upvotes - this.downvotes;\n// });\n\nUserSchema.pre('save', function comparePassword(next) {\n  // this is a reference to our model\n  // the function runs in some other context so DO NOT bind it\n  console.log(`in backend, next value is ${next}`);\n  const user = this;\n\n  if (!user.isModified('password')) {\n    return next();\n  } // TODO: do stuff here\n\n\n  const salt = _bcryptjs.default.genSaltSync(10);\n\n  const hash = _bcryptjs.default.hashSync(user.password, salt); // overwrite plain text password with encrypted password\n\n\n  user.password = hash;\n  return next(); // when done run the **next** callback with no arguments\n  // call next with an error if you encounter one\n  // return next();\n}); //  note use of named function rather than arrow notation\n//  this arrow notation is lexically scoped and prevents binding scope, which mongoose relies on\n\nUserSchema.methods.comparePassword = function comparePassword(candidatePassword, callback) {\n  // return callback(null, comparisonResult) for success\n  // or callback(error) in the error case\n  const user = this;\n\n  _bcryptjs.default.compare(candidatePassword, user.password, (err, comparisonResult) => {\n    if (err) return callback(err);else {\n      console.log('no errors in comparing ');\n      return callback(null, comparisonResult);\n    }\n  });\n}; // create model class\n\n\nconst UserModel = _mongoose.default.model('User', UserSchema); // create PostModel class from schema\n\n\nvar _default = UserModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJfbW9kZWwuanMiXSwibmFtZXMiOlsiVXNlclNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInVuaXF1ZSIsImxvd2VyY2FzZSIsInBhc3N3b3JkIiwidXNlcm5hbWUiLCJ0b09iamVjdCIsInZpcnR1YWxzIiwidG9KU09OIiwidGltZXN0YW1wcyIsInByZSIsImNvbXBhcmVQYXNzd29yZCIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwidXNlciIsImlzTW9kaWZpZWQiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdFN5bmMiLCJoYXNoIiwiaGFzaFN5bmMiLCJtZXRob2RzIiwiY2FuZGlkYXRlUGFzc3dvcmQiLCJjYWxsYmFjayIsImNvbXBhcmUiLCJlcnIiLCJjb21wYXJpc29uUmVzdWx0IiwiVXNlck1vZGVsIiwibW9uZ29vc2UiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7OztBQUVBLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0FBQzVCQyxFQUFBQSxLQUFLLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxNQUFNLEVBQUUsSUFBeEI7QUFBOEJDLElBQUFBLFNBQVMsRUFBRTtBQUF6QyxHQURxQjtBQUU1QkMsRUFBQUEsUUFBUSxFQUFFO0FBQUVKLElBQUFBLElBQUksRUFBRUM7QUFBUixHQUZrQjtBQUc1QkksRUFBQUEsUUFBUSxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsTUFBTSxFQUFFO0FBQXhCO0FBSGtCLENBQVgsRUFJaEI7QUFDREksRUFBQUEsUUFBUSxFQUFFO0FBQUVDLElBQUFBLFFBQVEsRUFBRTtBQUFaLEdBRFQ7QUFFREMsRUFBQUEsTUFBTSxFQUFFO0FBQUVELElBQUFBLFFBQVEsRUFBRTtBQUFaLEdBRlA7QUFHREUsRUFBQUEsVUFBVSxFQUFFO0FBSFgsQ0FKZ0IsQ0FBbkIsQyxDQVVBO0FBQ0E7QUFDQTs7QUFFQVosVUFBVSxDQUFDYSxHQUFYLENBQWUsTUFBZixFQUF1QixTQUFTQyxlQUFULENBQXlCQyxJQUF6QixFQUErQjtBQUNwRDtBQUNBO0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLDZCQUE0QkYsSUFBSyxFQUE5QztBQUNBLFFBQU1HLElBQUksR0FBRyxJQUFiOztBQUNBLE1BQUksQ0FBQ0EsSUFBSSxDQUFDQyxVQUFMLENBQWdCLFVBQWhCLENBQUwsRUFBa0M7QUFDaEMsV0FBT0osSUFBSSxFQUFYO0FBQ0QsR0FQbUQsQ0FRcEQ7OztBQUNBLFFBQU1LLElBQUksR0FBR0Msa0JBQU9DLFdBQVAsQ0FBbUIsRUFBbkIsQ0FBYjs7QUFDQSxRQUFNQyxJQUFJLEdBQUdGLGtCQUFPRyxRQUFQLENBQWdCTixJQUFJLENBQUNYLFFBQXJCLEVBQStCYSxJQUEvQixDQUFiLENBVm9ELENBWXBEOzs7QUFDQUYsRUFBQUEsSUFBSSxDQUFDWCxRQUFMLEdBQWdCZ0IsSUFBaEI7QUFDQSxTQUFPUixJQUFJLEVBQVgsQ0Fkb0QsQ0FnQnBEO0FBQ0E7QUFDQTtBQUNELENBbkJELEUsQ0FxQkE7QUFDQTs7QUFDQWYsVUFBVSxDQUFDeUIsT0FBWCxDQUFtQlgsZUFBbkIsR0FBcUMsU0FBU0EsZUFBVCxDQUF5QlksaUJBQXpCLEVBQTRDQyxRQUE1QyxFQUFzRDtBQUN6RjtBQUNBO0FBQ0EsUUFBTVQsSUFBSSxHQUFHLElBQWI7O0FBQ0FHLG9CQUFPTyxPQUFQLENBQWVGLGlCQUFmLEVBQWtDUixJQUFJLENBQUNYLFFBQXZDLEVBQWlELENBQUNzQixHQUFELEVBQU1DLGdCQUFOLEtBQTJCO0FBQzFFLFFBQUlELEdBQUosRUFBUyxPQUFPRixRQUFRLENBQUNFLEdBQUQsQ0FBZixDQUFULEtBQ0s7QUFDSGIsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVkseUJBQVo7QUFDQSxhQUFPVSxRQUFRLENBQUMsSUFBRCxFQUFPRyxnQkFBUCxDQUFmO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FYRCxDLENBYUE7OztBQUNBLE1BQU1DLFNBQVMsR0FBR0Msa0JBQVNDLEtBQVQsQ0FBZSxNQUFmLEVBQXVCakMsVUFBdkIsQ0FBbEIsQyxDQUVBOzs7ZUFFZStCLFMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2pvbmFoa2Vyc2hlbi9Eb2N1bWVudHMvRGFydG1vdXRoLzIwWC9DT1NDXzUyL3BsYXRmb3JtLWFwaS1qb25haGthbHNuZXJrZXJzaGVuL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGVtYWlsOiB7IHR5cGU6IFN0cmluZywgdW5pcXVlOiB0cnVlLCBsb3dlcmNhc2U6IHRydWUgfSxcbiAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nIH0sXG4gIHVzZXJuYW1lOiB7IHR5cGU6IFN0cmluZywgdW5pcXVlOiB0cnVlIH0sXG59LCB7XG4gIHRvT2JqZWN0OiB7IHZpcnR1YWxzOiB0cnVlIH0sXG4gIHRvSlNPTjogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB0aW1lc3RhbXBzOiB0cnVlLFxufSk7XG5cbi8vIFVzZXJTY2hlbWEudmlydHVhbCgnc2NvcmUnKS5nZXQoZnVuY3Rpb24gc2NvcmVDYWxjKCkge1xuLy8gICByZXR1cm4gdGhpcy51cHZvdGVzIC0gdGhpcy5kb3dudm90ZXM7XG4vLyB9KTtcblxuVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmQobmV4dCkge1xuICAvLyB0aGlzIGlzIGEgcmVmZXJlbmNlIHRvIG91ciBtb2RlbFxuICAvLyB0aGUgZnVuY3Rpb24gcnVucyBpbiBzb21lIG90aGVyIGNvbnRleHQgc28gRE8gTk9UIGJpbmQgaXRcbiAgY29uc29sZS5sb2coYGluIGJhY2tlbmQsIG5leHQgdmFsdWUgaXMgJHtuZXh0fWApO1xuICBjb25zdCB1c2VyID0gdGhpcztcbiAgaWYgKCF1c2VyLmlzTW9kaWZpZWQoJ3Bhc3N3b3JkJykpIHtcbiAgICByZXR1cm4gbmV4dCgpO1xuICB9XG4gIC8vIFRPRE86IGRvIHN0dWZmIGhlcmVcbiAgY29uc3Qgc2FsdCA9IGJjcnlwdC5nZW5TYWx0U3luYygxMCk7XG4gIGNvbnN0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmModXNlci5wYXNzd29yZCwgc2FsdCk7XG5cbiAgLy8gb3ZlcndyaXRlIHBsYWluIHRleHQgcGFzc3dvcmQgd2l0aCBlbmNyeXB0ZWQgcGFzc3dvcmRcbiAgdXNlci5wYXNzd29yZCA9IGhhc2g7XG4gIHJldHVybiBuZXh0KCk7XG5cbiAgLy8gd2hlbiBkb25lIHJ1biB0aGUgKipuZXh0KiogY2FsbGJhY2sgd2l0aCBubyBhcmd1bWVudHNcbiAgLy8gY2FsbCBuZXh0IHdpdGggYW4gZXJyb3IgaWYgeW91IGVuY291bnRlciBvbmVcbiAgLy8gcmV0dXJuIG5leHQoKTtcbn0pO1xuXG4vLyAgbm90ZSB1c2Ugb2YgbmFtZWQgZnVuY3Rpb24gcmF0aGVyIHRoYW4gYXJyb3cgbm90YXRpb25cbi8vICB0aGlzIGFycm93IG5vdGF0aW9uIGlzIGxleGljYWxseSBzY29wZWQgYW5kIHByZXZlbnRzIGJpbmRpbmcgc2NvcGUsIHdoaWNoIG1vbmdvb3NlIHJlbGllcyBvblxuVXNlclNjaGVtYS5tZXRob2RzLmNvbXBhcmVQYXNzd29yZCA9IGZ1bmN0aW9uIGNvbXBhcmVQYXNzd29yZChjYW5kaWRhdGVQYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgLy8gcmV0dXJuIGNhbGxiYWNrKG51bGwsIGNvbXBhcmlzb25SZXN1bHQpIGZvciBzdWNjZXNzXG4gIC8vIG9yIGNhbGxiYWNrKGVycm9yKSBpbiB0aGUgZXJyb3IgY2FzZVxuICBjb25zdCB1c2VyID0gdGhpcztcbiAgYmNyeXB0LmNvbXBhcmUoY2FuZGlkYXRlUGFzc3dvcmQsIHVzZXIucGFzc3dvcmQsIChlcnIsIGNvbXBhcmlzb25SZXN1bHQpID0+IHtcbiAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdubyBlcnJvcnMgaW4gY29tcGFyaW5nICcpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGNvbXBhcmlzb25SZXN1bHQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBjcmVhdGUgbW9kZWwgY2xhc3NcbmNvbnN0IFVzZXJNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5cbi8vIGNyZWF0ZSBQb3N0TW9kZWwgY2xhc3MgZnJvbSBzY2hlbWFcblxuZXhwb3J0IGRlZmF1bHQgVXNlck1vZGVsO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "user_model.js"
      ],
      "names": [
        "UserSchema",
        "Schema",
        "email",
        "type",
        "String",
        "unique",
        "lowercase",
        "password",
        "username",
        "toObject",
        "virtuals",
        "toJSON",
        "timestamps",
        "pre",
        "comparePassword",
        "next",
        "console",
        "log",
        "user",
        "isModified",
        "salt",
        "bcrypt",
        "genSaltSync",
        "hash",
        "hashSync",
        "methods",
        "candidatePassword",
        "callback",
        "compare",
        "err",
        "comparisonResult",
        "UserModel",
        "mongoose",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,KAAK,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,MAAM,EAAE,IAAxB;AAA8BC,IAAAA,SAAS,EAAE;AAAzC,GADqB;AAE5BC,EAAAA,QAAQ,EAAE;AAAEJ,IAAAA,IAAI,EAAEC;AAAR,GAFkB;AAG5BI,EAAAA,QAAQ,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,MAAM,EAAE;AAAxB;AAHkB,CAAX,EAIhB;AACDI,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GADT;AAEDC,EAAAA,MAAM,EAAE;AAAED,IAAAA,QAAQ,EAAE;AAAZ,GAFP;AAGDE,EAAAA,UAAU,EAAE;AAHX,CAJgB,CAAnB,C,CAUA;AACA;AACA;;AAEAZ,UAAU,CAACa,GAAX,CAAe,MAAf,EAAuB,SAASC,eAAT,CAAyBC,IAAzB,EAA+B;AACpD;AACA;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAa,6BAA4BF,IAAK,EAA9C;AACA,QAAMG,IAAI,GAAG,IAAb;;AACA,MAAI,CAACA,IAAI,CAACC,UAAL,CAAgB,UAAhB,CAAL,EAAkC;AAChC,WAAOJ,IAAI,EAAX;AACD,GAPmD,CAQpD;;;AACA,QAAMK,IAAI,GAAGC,kBAAOC,WAAP,CAAmB,EAAnB,CAAb;;AACA,QAAMC,IAAI,GAAGF,kBAAOG,QAAP,CAAgBN,IAAI,CAACX,QAArB,EAA+Ba,IAA/B,CAAb,CAVoD,CAYpD;;;AACAF,EAAAA,IAAI,CAACX,QAAL,GAAgBgB,IAAhB;AACA,SAAOR,IAAI,EAAX,CAdoD,CAgBpD;AACA;AACA;AACD,CAnBD,E,CAqBA;AACA;;AACAf,UAAU,CAACyB,OAAX,CAAmBX,eAAnB,GAAqC,SAASA,eAAT,CAAyBY,iBAAzB,EAA4CC,QAA5C,EAAsD;AACzF;AACA;AACA,QAAMT,IAAI,GAAG,IAAb;;AACAG,oBAAOO,OAAP,CAAeF,iBAAf,EAAkCR,IAAI,CAACX,QAAvC,EAAiD,CAACsB,GAAD,EAAMC,gBAAN,KAA2B;AAC1E,QAAID,GAAJ,EAAS,OAAOF,QAAQ,CAACE,GAAD,CAAf,CAAT,KACK;AACHb,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,aAAOU,QAAQ,CAAC,IAAD,EAAOG,gBAAP,CAAf;AACD;AACF,GAND;AAOD,CAXD,C,CAaA;;;AACA,MAAMC,SAAS,GAAGC,kBAASC,KAAT,CAAe,MAAf,EAAuBjC,UAAvB,CAAlB,C,CAEA;;;eAEe+B,S",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/models/",
      "sourcesContent": [
        "import mongoose, { Schema } from 'mongoose';\nimport bcrypt from 'bcryptjs';\n\nconst UserSchema = new Schema({\n  email: { type: String, unique: true, lowercase: true },\n  password: { type: String },\n  username: { type: String, unique: true },\n}, {\n  toObject: { virtuals: true },\n  toJSON: { virtuals: true },\n  timestamps: true,\n});\n\n// UserSchema.virtual('score').get(function scoreCalc() {\n//   return this.upvotes - this.downvotes;\n// });\n\nUserSchema.pre('save', function comparePassword(next) {\n  // this is a reference to our model\n  // the function runs in some other context so DO NOT bind it\n  console.log(`in backend, next value is ${next}`);\n  const user = this;\n  if (!user.isModified('password')) {\n    return next();\n  }\n  // TODO: do stuff here\n  const salt = bcrypt.genSaltSync(10);\n  const hash = bcrypt.hashSync(user.password, salt);\n\n  // overwrite plain text password with encrypted password\n  user.password = hash;\n  return next();\n\n  // when done run the **next** callback with no arguments\n  // call next with an error if you encounter one\n  // return next();\n});\n\n//  note use of named function rather than arrow notation\n//  this arrow notation is lexically scoped and prevents binding scope, which mongoose relies on\nUserSchema.methods.comparePassword = function comparePassword(candidatePassword, callback) {\n  // return callback(null, comparisonResult) for success\n  // or callback(error) in the error case\n  const user = this;\n  bcrypt.compare(candidatePassword, user.password, (err, comparisonResult) => {\n    if (err) return callback(err);\n    else {\n      console.log('no errors in comparing ');\n      return callback(null, comparisonResult);\n    }\n  });\n};\n\n// create model class\nconst UserModel = mongoose.model('User', UserSchema);\n\n// create PostModel class from schema\n\nexport default UserModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597638953519
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.requireSignin = exports.requireAuth = void 0;\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = _interopRequireDefault(require(\"passport-local\"));\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _user_model = _interopRequireDefault(require(\"../models/user_model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable consistent-return */\n// lets import some stuff\n// and import User\n// options for local strategy, we'll use email AS the username\n// not have separate ones\nconst localOptions = {\n  usernameField: 'email'\n}; // options for jwt strategy\n// we'll pass in the jwt in an `authorization` header\n// so passport can find it there\n\nconst jwtOptions = {\n  jwtFromRequest: _passportJwt.ExtractJwt.fromHeader('authorization'),\n  secretOrKey: process.env.AUTH_SECRET\n}; // NOTE: we are not calling this a bearer token (although it technically is), if you see people use Bearer in front of token on the internet you could either ignore it, use it but then you have to parse it out here as well as prepend it on the frontend.\n// username + password authentication strategy\n\nconst localLogin = new _passportLocal.default(localOptions, (email, password, done) => {\n  // Verify this email and password, call done with the user\n  // if it is the correct email and password\n  // otherwise, call done with false\n  _user_model.default.findOne({\n    email\n  }, (err, user) => {\n    if (err) {\n      return done(err);\n    }\n\n    if (!user) {\n      return done(null, false);\n    } // compare passwords - is `password` equal to user.password?\n\n\n    user.comparePassword(password, (err, isMatch) => {\n      if (err) {\n        done(err);\n      } else if (!isMatch) {\n        done(null, false);\n      } else {\n        done(null, user);\n      }\n    });\n  });\n});\nconst jwtLogin = new _passportJwt.Strategy(jwtOptions, (payload, done) => {\n  // See if the user ID in the payload exists in our database\n  // If it does, call 'done' with that other\n  // otherwise, call done without a user object\n  _user_model.default.findById(payload.sub, (err, user) => {\n    if (err) {\n      done(err, false);\n    } else if (user) {\n      done(null, user);\n    } else {\n      done(null, false);\n    }\n  });\n}); // Tell passport to use this strategy\n\n_passport.default.use(jwtLogin);\n\n_passport.default.use(localLogin);\n\nconst requireAuth = _passport.default.authenticate('jwt', {\n  session: false\n});\n\nexports.requireAuth = requireAuth;\n\nconst requireSignin = _passport.default.authenticate('local', {\n  session: false\n});\n\nexports.requireSignin = requireSignin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbImxvY2FsT3B0aW9ucyIsInVzZXJuYW1lRmllbGQiLCJqd3RPcHRpb25zIiwiand0RnJvbVJlcXVlc3QiLCJFeHRyYWN0Snd0IiwiZnJvbUhlYWRlciIsInNlY3JldE9yS2V5IiwicHJvY2VzcyIsImVudiIsIkFVVEhfU0VDUkVUIiwibG9jYWxMb2dpbiIsIkxvY2FsU3RyYXRlZ3kiLCJlbWFpbCIsInBhc3N3b3JkIiwiZG9uZSIsIlVzZXIiLCJmaW5kT25lIiwiZXJyIiwidXNlciIsImNvbXBhcmVQYXNzd29yZCIsImlzTWF0Y2giLCJqd3RMb2dpbiIsIkp3dFN0cmF0ZWd5IiwicGF5bG9hZCIsImZpbmRCeUlkIiwic3ViIiwicGFzc3BvcnQiLCJ1c2UiLCJyZXF1aXJlQXV0aCIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJyZXF1aXJlU2lnbmluIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBR0E7Ozs7QUFQQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBQ0EsTUFBTUEsWUFBWSxHQUFHO0FBQUVDLEVBQUFBLGFBQWEsRUFBRTtBQUFqQixDQUFyQixDLENBRUE7QUFDQTtBQUNBOztBQUNBLE1BQU1DLFVBQVUsR0FBRztBQUNqQkMsRUFBQUEsY0FBYyxFQUFFQyx3QkFBV0MsVUFBWCxDQUFzQixlQUF0QixDQURDO0FBRWpCQyxFQUFBQSxXQUFXLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQztBQUZSLENBQW5CLEMsQ0FJQTtBQUVBOztBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJQyxzQkFBSixDQUFrQlgsWUFBbEIsRUFBZ0MsQ0FBQ1ksS0FBRCxFQUFRQyxRQUFSLEVBQWtCQyxJQUFsQixLQUEyQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQUMsc0JBQUtDLE9BQUwsQ0FBYTtBQUFFSixJQUFBQTtBQUFGLEdBQWIsRUFBd0IsQ0FBQ0ssR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDckMsUUFBSUQsR0FBSixFQUFTO0FBQUUsYUFBT0gsSUFBSSxDQUFDRyxHQUFELENBQVg7QUFBbUI7O0FBRTlCLFFBQUksQ0FBQ0MsSUFBTCxFQUFXO0FBQUUsYUFBT0osSUFBSSxDQUFDLElBQUQsRUFBTyxLQUFQLENBQVg7QUFBMkIsS0FISCxDQUtyQzs7O0FBQ0FJLElBQUFBLElBQUksQ0FBQ0MsZUFBTCxDQUFxQk4sUUFBckIsRUFBK0IsQ0FBQ0ksR0FBRCxFQUFNRyxPQUFOLEtBQWtCO0FBQy9DLFVBQUlILEdBQUosRUFBUztBQUNQSCxRQUFBQSxJQUFJLENBQUNHLEdBQUQsQ0FBSjtBQUNELE9BRkQsTUFFTyxJQUFJLENBQUNHLE9BQUwsRUFBYztBQUNuQk4sUUFBQUEsSUFBSSxDQUFDLElBQUQsRUFBTyxLQUFQLENBQUo7QUFDRCxPQUZNLE1BRUE7QUFDTEEsUUFBQUEsSUFBSSxDQUFDLElBQUQsRUFBT0ksSUFBUCxDQUFKO0FBQ0Q7QUFDRixLQVJEO0FBU0QsR0FmRDtBQWdCRCxDQXBCa0IsQ0FBbkI7QUFzQkEsTUFBTUcsUUFBUSxHQUFHLElBQUlDLHFCQUFKLENBQWdCcEIsVUFBaEIsRUFBNEIsQ0FBQ3FCLE9BQUQsRUFBVVQsSUFBVixLQUFtQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQUMsc0JBQUtTLFFBQUwsQ0FBY0QsT0FBTyxDQUFDRSxHQUF0QixFQUEyQixDQUFDUixHQUFELEVBQU1DLElBQU4sS0FBZTtBQUN4QyxRQUFJRCxHQUFKLEVBQVM7QUFDUEgsTUFBQUEsSUFBSSxDQUFDRyxHQUFELEVBQU0sS0FBTixDQUFKO0FBQ0QsS0FGRCxNQUVPLElBQUlDLElBQUosRUFBVTtBQUNmSixNQUFBQSxJQUFJLENBQUMsSUFBRCxFQUFPSSxJQUFQLENBQUo7QUFDRCxLQUZNLE1BRUE7QUFDTEosTUFBQUEsSUFBSSxDQUFDLElBQUQsRUFBTyxLQUFQLENBQUo7QUFDRDtBQUNGLEdBUkQ7QUFTRCxDQWJnQixDQUFqQixDLENBZUE7O0FBQ0FZLGtCQUFTQyxHQUFULENBQWFOLFFBQWI7O0FBQ0FLLGtCQUFTQyxHQUFULENBQWFqQixVQUFiOztBQUVPLE1BQU1rQixXQUFXLEdBQUdGLGtCQUFTRyxZQUFULENBQXNCLEtBQXRCLEVBQTZCO0FBQUVDLEVBQUFBLE9BQU8sRUFBRTtBQUFYLENBQTdCLENBQXBCOzs7O0FBQ0EsTUFBTUMsYUFBYSxHQUFHTCxrQkFBU0csWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUEvQixDQUF0QiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvam9uYWhrZXJzaGVuL0RvY3VtZW50cy9EYXJ0bW91dGgvMjBYL0NPU0NfNTIvcGxhdGZvcm0tYXBpLWpvbmFoa2Fsc25lcmtlcnNoZW4vc3JjL3NlcnZpY2VzLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtcmV0dXJuICovXG4vLyBsZXRzIGltcG9ydCBzb21lIHN0dWZmXG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IExvY2FsU3RyYXRlZ3kgZnJvbSAncGFzc3BvcnQtbG9jYWwnO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgSnd0U3RyYXRlZ3ksIEV4dHJhY3RKd3QgfSBmcm9tICdwYXNzcG9ydC1qd3QnO1xuXG4vLyBhbmQgaW1wb3J0IFVzZXJcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyX21vZGVsJztcblxuLy8gb3B0aW9ucyBmb3IgbG9jYWwgc3RyYXRlZ3ksIHdlJ2xsIHVzZSBlbWFpbCBBUyB0aGUgdXNlcm5hbWVcbi8vIG5vdCBoYXZlIHNlcGFyYXRlIG9uZXNcbmNvbnN0IGxvY2FsT3B0aW9ucyA9IHsgdXNlcm5hbWVGaWVsZDogJ2VtYWlsJyB9O1xuXG4vLyBvcHRpb25zIGZvciBqd3Qgc3RyYXRlZ3lcbi8vIHdlJ2xsIHBhc3MgaW4gdGhlIGp3dCBpbiBhbiBgYXV0aG9yaXphdGlvbmAgaGVhZGVyXG4vLyBzbyBwYXNzcG9ydCBjYW4gZmluZCBpdCB0aGVyZVxuY29uc3Qgand0T3B0aW9ucyA9IHtcbiAgand0RnJvbVJlcXVlc3Q6IEV4dHJhY3RKd3QuZnJvbUhlYWRlcignYXV0aG9yaXphdGlvbicpLFxuICBzZWNyZXRPcktleTogcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQsXG59O1xuLy8gTk9URTogd2UgYXJlIG5vdCBjYWxsaW5nIHRoaXMgYSBiZWFyZXIgdG9rZW4gKGFsdGhvdWdoIGl0IHRlY2huaWNhbGx5IGlzKSwgaWYgeW91IHNlZSBwZW9wbGUgdXNlIEJlYXJlciBpbiBmcm9udCBvZiB0b2tlbiBvbiB0aGUgaW50ZXJuZXQgeW91IGNvdWxkIGVpdGhlciBpZ25vcmUgaXQsIHVzZSBpdCBidXQgdGhlbiB5b3UgaGF2ZSB0byBwYXJzZSBpdCBvdXQgaGVyZSBhcyB3ZWxsIGFzIHByZXBlbmQgaXQgb24gdGhlIGZyb250ZW5kLlxuXG4vLyB1c2VybmFtZSArIHBhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIHN0cmF0ZWd5XG5jb25zdCBsb2NhbExvZ2luID0gbmV3IExvY2FsU3RyYXRlZ3kobG9jYWxPcHRpb25zLCAoZW1haWwsIHBhc3N3b3JkLCBkb25lKSA9PiB7XG4gIC8vIFZlcmlmeSB0aGlzIGVtYWlsIGFuZCBwYXNzd29yZCwgY2FsbCBkb25lIHdpdGggdGhlIHVzZXJcbiAgLy8gaWYgaXQgaXMgdGhlIGNvcnJlY3QgZW1haWwgYW5kIHBhc3N3b3JkXG4gIC8vIG90aGVyd2lzZSwgY2FsbCBkb25lIHdpdGggZmFsc2VcbiAgVXNlci5maW5kT25lKHsgZW1haWwgfSwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIpIHsgcmV0dXJuIGRvbmUoZXJyKTsgfVxuXG4gICAgaWYgKCF1c2VyKSB7IHJldHVybiBkb25lKG51bGwsIGZhbHNlKTsgfVxuXG4gICAgLy8gY29tcGFyZSBwYXNzd29yZHMgLSBpcyBgcGFzc3dvcmRgIGVxdWFsIHRvIHVzZXIucGFzc3dvcmQ/XG4gICAgdXNlci5jb21wYXJlUGFzc3dvcmQocGFzc3dvcmQsIChlcnIsIGlzTWF0Y2gpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZG9uZShlcnIpO1xuICAgICAgfSBlbHNlIGlmICghaXNNYXRjaCkge1xuICAgICAgICBkb25lKG51bGwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbmUobnVsbCwgdXNlcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmNvbnN0IGp3dExvZ2luID0gbmV3IEp3dFN0cmF0ZWd5KGp3dE9wdGlvbnMsIChwYXlsb2FkLCBkb25lKSA9PiB7XG4gIC8vIFNlZSBpZiB0aGUgdXNlciBJRCBpbiB0aGUgcGF5bG9hZCBleGlzdHMgaW4gb3VyIGRhdGFiYXNlXG4gIC8vIElmIGl0IGRvZXMsIGNhbGwgJ2RvbmUnIHdpdGggdGhhdCBvdGhlclxuICAvLyBvdGhlcndpc2UsIGNhbGwgZG9uZSB3aXRob3V0IGEgdXNlciBvYmplY3RcbiAgVXNlci5maW5kQnlJZChwYXlsb2FkLnN1YiwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGRvbmUoZXJyLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmICh1c2VyKSB7XG4gICAgICBkb25lKG51bGwsIHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb25lKG51bGwsIGZhbHNlKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIFRlbGwgcGFzc3BvcnQgdG8gdXNlIHRoaXMgc3RyYXRlZ3lcbnBhc3Nwb3J0LnVzZShqd3RMb2dpbik7XG5wYXNzcG9ydC51c2UobG9jYWxMb2dpbik7XG5cbmV4cG9ydCBjb25zdCByZXF1aXJlQXV0aCA9IHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnand0JywgeyBzZXNzaW9uOiBmYWxzZSB9KTtcbmV4cG9ydCBjb25zdCByZXF1aXJlU2lnbmluID0gcGFzc3BvcnQuYXV0aGVudGljYXRlKCdsb2NhbCcsIHsgc2Vzc2lvbjogZmFsc2UgfSk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "localOptions",
        "usernameField",
        "jwtOptions",
        "jwtFromRequest",
        "ExtractJwt",
        "fromHeader",
        "secretOrKey",
        "process",
        "env",
        "AUTH_SECRET",
        "localLogin",
        "LocalStrategy",
        "email",
        "password",
        "done",
        "User",
        "findOne",
        "err",
        "user",
        "comparePassword",
        "isMatch",
        "jwtLogin",
        "JwtStrategy",
        "payload",
        "findById",
        "sub",
        "passport",
        "use",
        "requireAuth",
        "authenticate",
        "session",
        "requireSignin"
      ],
      "mappings": ";;;;;;;AAEA;;AACA;;AACA;;AAGA;;;;AAPA;AACA;AAKA;AAGA;AACA;AACA,MAAMA,YAAY,GAAG;AAAEC,EAAAA,aAAa,EAAE;AAAjB,CAArB,C,CAEA;AACA;AACA;;AACA,MAAMC,UAAU,GAAG;AACjBC,EAAAA,cAAc,EAAEC,wBAAWC,UAAX,CAAsB,eAAtB,CADC;AAEjBC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAFR,CAAnB,C,CAIA;AAEA;;AACA,MAAMC,UAAU,GAAG,IAAIC,sBAAJ,CAAkBX,YAAlB,EAAgC,CAACY,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,KAA2B;AAC5E;AACA;AACA;AACAC,sBAAKC,OAAL,CAAa;AAAEJ,IAAAA;AAAF,GAAb,EAAwB,CAACK,GAAD,EAAMC,IAAN,KAAe;AACrC,QAAID,GAAJ,EAAS;AAAE,aAAOH,IAAI,CAACG,GAAD,CAAX;AAAmB;;AAE9B,QAAI,CAACC,IAAL,EAAW;AAAE,aAAOJ,IAAI,CAAC,IAAD,EAAO,KAAP,CAAX;AAA2B,KAHH,CAKrC;;;AACAI,IAAAA,IAAI,CAACC,eAAL,CAAqBN,QAArB,EAA+B,CAACI,GAAD,EAAMG,OAAN,KAAkB;AAC/C,UAAIH,GAAJ,EAAS;AACPH,QAAAA,IAAI,CAACG,GAAD,CAAJ;AACD,OAFD,MAEO,IAAI,CAACG,OAAL,EAAc;AACnBN,QAAAA,IAAI,CAAC,IAAD,EAAO,KAAP,CAAJ;AACD,OAFM,MAEA;AACLA,QAAAA,IAAI,CAAC,IAAD,EAAOI,IAAP,CAAJ;AACD;AACF,KARD;AASD,GAfD;AAgBD,CApBkB,CAAnB;AAsBA,MAAMG,QAAQ,GAAG,IAAIC,qBAAJ,CAAgBpB,UAAhB,EAA4B,CAACqB,OAAD,EAAUT,IAAV,KAAmB;AAC9D;AACA;AACA;AACAC,sBAAKS,QAAL,CAAcD,OAAO,CAACE,GAAtB,EAA2B,CAACR,GAAD,EAAMC,IAAN,KAAe;AACxC,QAAID,GAAJ,EAAS;AACPH,MAAAA,IAAI,CAACG,GAAD,EAAM,KAAN,CAAJ;AACD,KAFD,MAEO,IAAIC,IAAJ,EAAU;AACfJ,MAAAA,IAAI,CAAC,IAAD,EAAOI,IAAP,CAAJ;AACD,KAFM,MAEA;AACLJ,MAAAA,IAAI,CAAC,IAAD,EAAO,KAAP,CAAJ;AACD;AACF,GARD;AASD,CAbgB,CAAjB,C,CAeA;;AACAY,kBAASC,GAAT,CAAaN,QAAb;;AACAK,kBAASC,GAAT,CAAajB,UAAb;;AAEO,MAAMkB,WAAW,GAAGF,kBAASG,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAApB;;;;AACA,MAAMC,aAAa,GAAGL,kBAASG,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA/B,CAAtB",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
      "sourcesContent": [
        "/* eslint-disable consistent-return */\n// lets import some stuff\nimport passport from 'passport';\nimport LocalStrategy from 'passport-local';\nimport { Strategy as JwtStrategy, ExtractJwt } from 'passport-jwt';\n\n// and import User\nimport User from '../models/user_model';\n\n// options for local strategy, we'll use email AS the username\n// not have separate ones\nconst localOptions = { usernameField: 'email' };\n\n// options for jwt strategy\n// we'll pass in the jwt in an `authorization` header\n// so passport can find it there\nconst jwtOptions = {\n  jwtFromRequest: ExtractJwt.fromHeader('authorization'),\n  secretOrKey: process.env.AUTH_SECRET,\n};\n// NOTE: we are not calling this a bearer token (although it technically is), if you see people use Bearer in front of token on the internet you could either ignore it, use it but then you have to parse it out here as well as prepend it on the frontend.\n\n// username + password authentication strategy\nconst localLogin = new LocalStrategy(localOptions, (email, password, done) => {\n  // Verify this email and password, call done with the user\n  // if it is the correct email and password\n  // otherwise, call done with false\n  User.findOne({ email }, (err, user) => {\n    if (err) { return done(err); }\n\n    if (!user) { return done(null, false); }\n\n    // compare passwords - is `password` equal to user.password?\n    user.comparePassword(password, (err, isMatch) => {\n      if (err) {\n        done(err);\n      } else if (!isMatch) {\n        done(null, false);\n      } else {\n        done(null, user);\n      }\n    });\n  });\n});\n\nconst jwtLogin = new JwtStrategy(jwtOptions, (payload, done) => {\n  // See if the user ID in the payload exists in our database\n  // If it does, call 'done' with that other\n  // otherwise, call done without a user object\n  User.findById(payload.sub, (err, user) => {\n    if (err) {\n      done(err, false);\n    } else if (user) {\n      done(null, user);\n    } else {\n      done(null, false);\n    }\n  });\n});\n\n// Tell passport to use this strategy\npassport.use(jwtLogin);\npassport.use(localLogin);\n\nexport const requireAuth = passport.authenticate('jwt', { session: false });\nexport const requireSignin = passport.authenticate('local', { session: false });\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597599115190
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.requireSignin = exports.requireAuth = void 0;\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = _interopRequireDefault(require(\"passport-local\"));\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _user_model = _interopRequireDefault(require(\"../models/user_model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable consistent-return */\n// lets import some stuff\n// and import User\n// options for local strategy, we'll use email AS the username\n// not have separate ones\nconst localOptions = {\n  usernameField: 'email'\n}; // options for jwt strategy\n// we'll pass in the jwt in an `authorization` header\n// so passport can find it there\n\nconst jwtOptions = {\n  jwtFromRequest: _passportJwt.ExtractJwt.fromHeader('authorization'),\n  secretOrKey: process.env.AUTH_SECRET\n}; // NOTE: we are not calling this a bearer token (although it technically is), if you see people use Bearer in front of token on the internet you could either ignore it, use it but then you have to parse it out here as well as prepend it on the frontend.\n// username + password authentication strategy\n\nconst localLogin = new _passportLocal.default(localOptions, (email, password, done) => {\n  // Verify this email and password, call done with the user\n  // if it is the correct email and password\n  // otherwise, call done with false\n  _user_model.default.findOne({\n    email\n  }, (err, user) => {\n    if (err) {\n      return done(err);\n    }\n\n    if (!user) {\n      return done(null, false);\n    } // compare passwords - is `password` equal to user.password?\n\n\n    user.comparePassword(password, (err, isMatch) => {\n      if (err) {\n        done(err);\n      } else if (!isMatch) {\n        done(null, false);\n      } else {\n        done(null, user);\n      }\n    });\n  });\n});\nconst jwtLogin = new _passportJwt.Strategy(jwtOptions, (payload, done) => {\n  // See if the user ID in the payload exists in our database\n  // If it does, call 'done' with that other\n  // otherwise, call done without a user object\n  _user_model.default.findById(payload.sub, (err, user) => {\n    if (err) {\n      done(err, false);\n    } else if (user) {\n      done(null, user);\n    } else {\n      done(null, false);\n    }\n  });\n}); // Tell passport to use this strategy\n\n_passport.default.use(jwtLogin);\n\n_passport.default.use(localLogin);\n\nconst requireAuth = _passport.default.authenticate('jwt', {\n  session: false\n});\n\nexports.requireAuth = requireAuth;\n\nconst requireSignin = _passport.default.authenticate('local', {\n  session: false\n});\n\nexports.requireSignin = requireSignin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbImxvY2FsT3B0aW9ucyIsInVzZXJuYW1lRmllbGQiLCJqd3RPcHRpb25zIiwiand0RnJvbVJlcXVlc3QiLCJFeHRyYWN0Snd0IiwiZnJvbUhlYWRlciIsInNlY3JldE9yS2V5IiwicHJvY2VzcyIsImVudiIsIkFVVEhfU0VDUkVUIiwibG9jYWxMb2dpbiIsIkxvY2FsU3RyYXRlZ3kiLCJlbWFpbCIsInBhc3N3b3JkIiwiZG9uZSIsIlVzZXIiLCJmaW5kT25lIiwiZXJyIiwidXNlciIsImNvbXBhcmVQYXNzd29yZCIsImlzTWF0Y2giLCJqd3RMb2dpbiIsIkp3dFN0cmF0ZWd5IiwicGF5bG9hZCIsImZpbmRCeUlkIiwic3ViIiwicGFzc3BvcnQiLCJ1c2UiLCJyZXF1aXJlQXV0aCIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJyZXF1aXJlU2lnbmluIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBR0E7Ozs7QUFQQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBQ0EsTUFBTUEsWUFBWSxHQUFHO0FBQUVDLEVBQUFBLGFBQWEsRUFBRTtBQUFqQixDQUFyQixDLENBRUE7QUFDQTtBQUNBOztBQUNBLE1BQU1DLFVBQVUsR0FBRztBQUNqQkMsRUFBQUEsY0FBYyxFQUFFQyx3QkFBV0MsVUFBWCxDQUFzQixlQUF0QixDQURDO0FBRWpCQyxFQUFBQSxXQUFXLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQztBQUZSLENBQW5CLEMsQ0FJQTtBQUVBOztBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJQyxzQkFBSixDQUFrQlgsWUFBbEIsRUFBZ0MsQ0FBQ1ksS0FBRCxFQUFRQyxRQUFSLEVBQWtCQyxJQUFsQixLQUEyQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQUMsc0JBQUtDLE9BQUwsQ0FBYTtBQUFFSixJQUFBQTtBQUFGLEdBQWIsRUFBd0IsQ0FBQ0ssR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDckMsUUFBSUQsR0FBSixFQUFTO0FBQUUsYUFBT0gsSUFBSSxDQUFDRyxHQUFELENBQVg7QUFBbUI7O0FBRTlCLFFBQUksQ0FBQ0MsSUFBTCxFQUFXO0FBQUUsYUFBT0osSUFBSSxDQUFDLElBQUQsRUFBTyxLQUFQLENBQVg7QUFBMkIsS0FISCxDQUtyQzs7O0FBQ0FJLElBQUFBLElBQUksQ0FBQ0MsZUFBTCxDQUFxQk4sUUFBckIsRUFBK0IsQ0FBQ0ksR0FBRCxFQUFNRyxPQUFOLEtBQWtCO0FBQy9DLFVBQUlILEdBQUosRUFBUztBQUNQSCxRQUFBQSxJQUFJLENBQUNHLEdBQUQsQ0FBSjtBQUNELE9BRkQsTUFFTyxJQUFJLENBQUNHLE9BQUwsRUFBYztBQUNuQk4sUUFBQUEsSUFBSSxDQUFDLElBQUQsRUFBTyxLQUFQLENBQUo7QUFDRCxPQUZNLE1BRUE7QUFDTEEsUUFBQUEsSUFBSSxDQUFDLElBQUQsRUFBT0ksSUFBUCxDQUFKO0FBQ0Q7QUFDRixLQVJEO0FBU0QsR0FmRDtBQWdCRCxDQXBCa0IsQ0FBbkI7QUFzQkEsTUFBTUcsUUFBUSxHQUFHLElBQUlDLHFCQUFKLENBQWdCcEIsVUFBaEIsRUFBNEIsQ0FBQ3FCLE9BQUQsRUFBVVQsSUFBVixLQUFtQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQUMsc0JBQUtTLFFBQUwsQ0FBY0QsT0FBTyxDQUFDRSxHQUF0QixFQUEyQixDQUFDUixHQUFELEVBQU1DLElBQU4sS0FBZTtBQUN4QyxRQUFJRCxHQUFKLEVBQVM7QUFDUEgsTUFBQUEsSUFBSSxDQUFDRyxHQUFELEVBQU0sS0FBTixDQUFKO0FBQ0QsS0FGRCxNQUVPLElBQUlDLElBQUosRUFBVTtBQUNmSixNQUFBQSxJQUFJLENBQUMsSUFBRCxFQUFPSSxJQUFQLENBQUo7QUFDRCxLQUZNLE1BRUE7QUFDTEosTUFBQUEsSUFBSSxDQUFDLElBQUQsRUFBTyxLQUFQLENBQUo7QUFDRDtBQUNGLEdBUkQ7QUFTRCxDQWJnQixDQUFqQixDLENBZUE7O0FBQ0FZLGtCQUFTQyxHQUFULENBQWFOLFFBQWI7O0FBQ0FLLGtCQUFTQyxHQUFULENBQWFqQixVQUFiOztBQUVPLE1BQU1rQixXQUFXLEdBQUdGLGtCQUFTRyxZQUFULENBQXNCLEtBQXRCLEVBQTZCO0FBQUVDLEVBQUFBLE9BQU8sRUFBRTtBQUFYLENBQTdCLENBQXBCOzs7O0FBQ0EsTUFBTUMsYUFBYSxHQUFHTCxrQkFBU0csWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUEvQixDQUF0QiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvam9uYWhrZXJzaGVuL0RvY3VtZW50cy9EYXJ0bW91dGgvMjBYL0NPU0NfNTIvcGxhdGZvcm0tYXBpLWpvbmFoa2Fsc25lcmtlcnNoZW4vc3JjL3NlcnZpY2VzLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtcmV0dXJuICovXG4vLyBsZXRzIGltcG9ydCBzb21lIHN0dWZmXG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IExvY2FsU3RyYXRlZ3kgZnJvbSAncGFzc3BvcnQtbG9jYWwnO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgSnd0U3RyYXRlZ3ksIEV4dHJhY3RKd3QgfSBmcm9tICdwYXNzcG9ydC1qd3QnO1xuXG4vLyBhbmQgaW1wb3J0IFVzZXJcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyX21vZGVsJztcblxuLy8gb3B0aW9ucyBmb3IgbG9jYWwgc3RyYXRlZ3ksIHdlJ2xsIHVzZSBlbWFpbCBBUyB0aGUgdXNlcm5hbWVcbi8vIG5vdCBoYXZlIHNlcGFyYXRlIG9uZXNcbmNvbnN0IGxvY2FsT3B0aW9ucyA9IHsgdXNlcm5hbWVGaWVsZDogJ2VtYWlsJyB9O1xuXG4vLyBvcHRpb25zIGZvciBqd3Qgc3RyYXRlZ3lcbi8vIHdlJ2xsIHBhc3MgaW4gdGhlIGp3dCBpbiBhbiBgYXV0aG9yaXphdGlvbmAgaGVhZGVyXG4vLyBzbyBwYXNzcG9ydCBjYW4gZmluZCBpdCB0aGVyZVxuY29uc3Qgand0T3B0aW9ucyA9IHtcbiAgand0RnJvbVJlcXVlc3Q6IEV4dHJhY3RKd3QuZnJvbUhlYWRlcignYXV0aG9yaXphdGlvbicpLFxuICBzZWNyZXRPcktleTogcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQsXG59O1xuLy8gTk9URTogd2UgYXJlIG5vdCBjYWxsaW5nIHRoaXMgYSBiZWFyZXIgdG9rZW4gKGFsdGhvdWdoIGl0IHRlY2huaWNhbGx5IGlzKSwgaWYgeW91IHNlZSBwZW9wbGUgdXNlIEJlYXJlciBpbiBmcm9udCBvZiB0b2tlbiBvbiB0aGUgaW50ZXJuZXQgeW91IGNvdWxkIGVpdGhlciBpZ25vcmUgaXQsIHVzZSBpdCBidXQgdGhlbiB5b3UgaGF2ZSB0byBwYXJzZSBpdCBvdXQgaGVyZSBhcyB3ZWxsIGFzIHByZXBlbmQgaXQgb24gdGhlIGZyb250ZW5kLlxuXG4vLyB1c2VybmFtZSArIHBhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIHN0cmF0ZWd5XG5jb25zdCBsb2NhbExvZ2luID0gbmV3IExvY2FsU3RyYXRlZ3kobG9jYWxPcHRpb25zLCAoZW1haWwsIHBhc3N3b3JkLCBkb25lKSA9PiB7XG4gIC8vIFZlcmlmeSB0aGlzIGVtYWlsIGFuZCBwYXNzd29yZCwgY2FsbCBkb25lIHdpdGggdGhlIHVzZXJcbiAgLy8gaWYgaXQgaXMgdGhlIGNvcnJlY3QgZW1haWwgYW5kIHBhc3N3b3JkXG4gIC8vIG90aGVyd2lzZSwgY2FsbCBkb25lIHdpdGggZmFsc2VcbiAgVXNlci5maW5kT25lKHsgZW1haWwgfSwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIpIHsgcmV0dXJuIGRvbmUoZXJyKTsgfVxuXG4gICAgaWYgKCF1c2VyKSB7IHJldHVybiBkb25lKG51bGwsIGZhbHNlKTsgfVxuXG4gICAgLy8gY29tcGFyZSBwYXNzd29yZHMgLSBpcyBgcGFzc3dvcmRgIGVxdWFsIHRvIHVzZXIucGFzc3dvcmQ/XG4gICAgdXNlci5jb21wYXJlUGFzc3dvcmQocGFzc3dvcmQsIChlcnIsIGlzTWF0Y2gpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZG9uZShlcnIpO1xuICAgICAgfSBlbHNlIGlmICghaXNNYXRjaCkge1xuICAgICAgICBkb25lKG51bGwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbmUobnVsbCwgdXNlcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmNvbnN0IGp3dExvZ2luID0gbmV3IEp3dFN0cmF0ZWd5KGp3dE9wdGlvbnMsIChwYXlsb2FkLCBkb25lKSA9PiB7XG4gIC8vIFNlZSBpZiB0aGUgdXNlciBJRCBpbiB0aGUgcGF5bG9hZCBleGlzdHMgaW4gb3VyIGRhdGFiYXNlXG4gIC8vIElmIGl0IGRvZXMsIGNhbGwgJ2RvbmUnIHdpdGggdGhhdCBvdGhlclxuICAvLyBvdGhlcndpc2UsIGNhbGwgZG9uZSB3aXRob3V0IGEgdXNlciBvYmplY3RcbiAgVXNlci5maW5kQnlJZChwYXlsb2FkLnN1YiwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGRvbmUoZXJyLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmICh1c2VyKSB7XG4gICAgICBkb25lKG51bGwsIHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb25lKG51bGwsIGZhbHNlKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIFRlbGwgcGFzc3BvcnQgdG8gdXNlIHRoaXMgc3RyYXRlZ3lcbnBhc3Nwb3J0LnVzZShqd3RMb2dpbik7XG5wYXNzcG9ydC51c2UobG9jYWxMb2dpbik7XG5cbmV4cG9ydCBjb25zdCByZXF1aXJlQXV0aCA9IHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnand0JywgeyBzZXNzaW9uOiBmYWxzZSB9KTtcbmV4cG9ydCBjb25zdCByZXF1aXJlU2lnbmluID0gcGFzc3BvcnQuYXV0aGVudGljYXRlKCdsb2NhbCcsIHsgc2Vzc2lvbjogZmFsc2UgfSk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "localOptions",
        "usernameField",
        "jwtOptions",
        "jwtFromRequest",
        "ExtractJwt",
        "fromHeader",
        "secretOrKey",
        "process",
        "env",
        "AUTH_SECRET",
        "localLogin",
        "LocalStrategy",
        "email",
        "password",
        "done",
        "User",
        "findOne",
        "err",
        "user",
        "comparePassword",
        "isMatch",
        "jwtLogin",
        "JwtStrategy",
        "payload",
        "findById",
        "sub",
        "passport",
        "use",
        "requireAuth",
        "authenticate",
        "session",
        "requireSignin"
      ],
      "mappings": ";;;;;;;AAEA;;AACA;;AACA;;AAGA;;;;AAPA;AACA;AAKA;AAGA;AACA;AACA,MAAMA,YAAY,GAAG;AAAEC,EAAAA,aAAa,EAAE;AAAjB,CAArB,C,CAEA;AACA;AACA;;AACA,MAAMC,UAAU,GAAG;AACjBC,EAAAA,cAAc,EAAEC,wBAAWC,UAAX,CAAsB,eAAtB,CADC;AAEjBC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAFR,CAAnB,C,CAIA;AAEA;;AACA,MAAMC,UAAU,GAAG,IAAIC,sBAAJ,CAAkBX,YAAlB,EAAgC,CAACY,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,KAA2B;AAC5E;AACA;AACA;AACAC,sBAAKC,OAAL,CAAa;AAAEJ,IAAAA;AAAF,GAAb,EAAwB,CAACK,GAAD,EAAMC,IAAN,KAAe;AACrC,QAAID,GAAJ,EAAS;AAAE,aAAOH,IAAI,CAACG,GAAD,CAAX;AAAmB;;AAE9B,QAAI,CAACC,IAAL,EAAW;AAAE,aAAOJ,IAAI,CAAC,IAAD,EAAO,KAAP,CAAX;AAA2B,KAHH,CAKrC;;;AACAI,IAAAA,IAAI,CAACC,eAAL,CAAqBN,QAArB,EAA+B,CAACI,GAAD,EAAMG,OAAN,KAAkB;AAC/C,UAAIH,GAAJ,EAAS;AACPH,QAAAA,IAAI,CAACG,GAAD,CAAJ;AACD,OAFD,MAEO,IAAI,CAACG,OAAL,EAAc;AACnBN,QAAAA,IAAI,CAAC,IAAD,EAAO,KAAP,CAAJ;AACD,OAFM,MAEA;AACLA,QAAAA,IAAI,CAAC,IAAD,EAAOI,IAAP,CAAJ;AACD;AACF,KARD;AASD,GAfD;AAgBD,CApBkB,CAAnB;AAsBA,MAAMG,QAAQ,GAAG,IAAIC,qBAAJ,CAAgBpB,UAAhB,EAA4B,CAACqB,OAAD,EAAUT,IAAV,KAAmB;AAC9D;AACA;AACA;AACAC,sBAAKS,QAAL,CAAcD,OAAO,CAACE,GAAtB,EAA2B,CAACR,GAAD,EAAMC,IAAN,KAAe;AACxC,QAAID,GAAJ,EAAS;AACPH,MAAAA,IAAI,CAACG,GAAD,EAAM,KAAN,CAAJ;AACD,KAFD,MAEO,IAAIC,IAAJ,EAAU;AACfJ,MAAAA,IAAI,CAAC,IAAD,EAAOI,IAAP,CAAJ;AACD,KAFM,MAEA;AACLJ,MAAAA,IAAI,CAAC,IAAD,EAAO,KAAP,CAAJ;AACD;AACF,GARD;AASD,CAbgB,CAAjB,C,CAeA;;AACAY,kBAASC,GAAT,CAAaN,QAAb;;AACAK,kBAASC,GAAT,CAAajB,UAAb;;AAEO,MAAMkB,WAAW,GAAGF,kBAASG,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAApB;;;;AACA,MAAMC,aAAa,GAAGL,kBAASG,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA/B,CAAtB",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
      "sourcesContent": [
        "/* eslint-disable consistent-return */\n// lets import some stuff\nimport passport from 'passport';\nimport LocalStrategy from 'passport-local';\nimport { Strategy as JwtStrategy, ExtractJwt } from 'passport-jwt';\n\n// and import User\nimport User from '../models/user_model';\n\n// options for local strategy, we'll use email AS the username\n// not have separate ones\nconst localOptions = { usernameField: 'email' };\n\n// options for jwt strategy\n// we'll pass in the jwt in an `authorization` header\n// so passport can find it there\nconst jwtOptions = {\n  jwtFromRequest: ExtractJwt.fromHeader('authorization'),\n  secretOrKey: process.env.AUTH_SECRET,\n};\n// NOTE: we are not calling this a bearer token (although it technically is), if you see people use Bearer in front of token on the internet you could either ignore it, use it but then you have to parse it out here as well as prepend it on the frontend.\n\n// username + password authentication strategy\nconst localLogin = new LocalStrategy(localOptions, (email, password, done) => {\n  // Verify this email and password, call done with the user\n  // if it is the correct email and password\n  // otherwise, call done with false\n  User.findOne({ email }, (err, user) => {\n    if (err) { return done(err); }\n\n    if (!user) { return done(null, false); }\n\n    // compare passwords - is `password` equal to user.password?\n    user.comparePassword(password, (err, isMatch) => {\n      if (err) {\n        done(err);\n      } else if (!isMatch) {\n        done(null, false);\n      } else {\n        done(null, user);\n      }\n    });\n  });\n});\n\nconst jwtLogin = new JwtStrategy(jwtOptions, (payload, done) => {\n  // See if the user ID in the payload exists in our database\n  // If it does, call 'done' with that other\n  // otherwise, call done without a user object\n  User.findById(payload.sub, (err, user) => {\n    if (err) {\n      done(err, false);\n    } else if (user) {\n      done(null, user);\n    } else {\n      done(null, false);\n    }\n  });\n});\n\n// Tell passport to use this strategy\npassport.use(jwtLogin);\npassport.use(localLogin);\n\nexport const requireAuth = passport.authenticate('jwt', { session: false });\nexport const requireSignin = passport.authenticate('local', { session: false });\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597599115190
  },
  "{\"sourceRoot\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"filename\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/s3.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/s3.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/s3.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/s3.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
        "sourceFileName": "s3.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _awsSdk = _interopRequireDefault(require(\"aws-sdk\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst signS3 = (req, res) => {\n  const s3 = new _awsSdk.default.S3({\n    signatureVersion: 'v4',\n    region: 'us-east-2'\n  });\n  const fileName = req.query['file-name'];\n  const fileType = req.query['file-type'];\n  const s3Params = {\n    Bucket: process.env.S3_BUCKET_NAME,\n    Key: fileName,\n    Expires: 60,\n    ContentType: fileType,\n    ACL: 'public-read'\n  };\n  s3.getSignedUrl('putObject', s3Params, (err, data) => {\n    if (err) {\n      res.status(422).end();\n    }\n\n    const returnData = {\n      signedRequest: data,\n      url: `https://${process.env.S3_BUCKET_NAME}.s3.amazonaws.com/${fileName}`\n    };\n    return res.send(JSON.stringify(returnData));\n  });\n};\n\nvar _default = signS3;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInMzLmpzIl0sIm5hbWVzIjpbInNpZ25TMyIsInJlcSIsInJlcyIsInMzIiwiYXdzIiwiUzMiLCJzaWduYXR1cmVWZXJzaW9uIiwicmVnaW9uIiwiZmlsZU5hbWUiLCJxdWVyeSIsImZpbGVUeXBlIiwiczNQYXJhbXMiLCJCdWNrZXQiLCJwcm9jZXNzIiwiZW52IiwiUzNfQlVDS0VUX05BTUUiLCJLZXkiLCJFeHBpcmVzIiwiQ29udGVudFR5cGUiLCJBQ0wiLCJnZXRTaWduZWRVcmwiLCJlcnIiLCJkYXRhIiwic3RhdHVzIiwiZW5kIiwicmV0dXJuRGF0YSIsInNpZ25lZFJlcXVlc3QiLCJ1cmwiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQzNCLFFBQU1DLEVBQUUsR0FBRyxJQUFJQyxnQkFBSUMsRUFBUixDQUFXO0FBQUVDLElBQUFBLGdCQUFnQixFQUFFLElBQXBCO0FBQTBCQyxJQUFBQSxNQUFNLEVBQUU7QUFBbEMsR0FBWCxDQUFYO0FBQXdFLFFBQU1DLFFBQVEsR0FBR1AsR0FBRyxDQUFDUSxLQUFKLENBQVUsV0FBVixDQUFqQjtBQUN4RSxRQUFNQyxRQUFRLEdBQUdULEdBQUcsQ0FBQ1EsS0FBSixDQUFVLFdBQVYsQ0FBakI7QUFDQSxRQUFNRSxRQUFRLEdBQUc7QUFDZkMsSUFBQUEsTUFBTSxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsY0FETDtBQUVmQyxJQUFBQSxHQUFHLEVBQUVSLFFBRlU7QUFHZlMsSUFBQUEsT0FBTyxFQUFFLEVBSE07QUFJZkMsSUFBQUEsV0FBVyxFQUFFUixRQUpFO0FBS2ZTLElBQUFBLEdBQUcsRUFBRTtBQUxVLEdBQWpCO0FBT0FoQixFQUFBQSxFQUFFLENBQUNpQixZQUFILENBQWdCLFdBQWhCLEVBQTZCVCxRQUE3QixFQUF1QyxDQUFDVSxHQUFELEVBQU1DLElBQU4sS0FBZTtBQUNwRCxRQUFJRCxHQUFKLEVBQVM7QUFBRW5CLE1BQUFBLEdBQUcsQ0FBQ3FCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxHQUFoQjtBQUF3Qjs7QUFFbkMsVUFBTUMsVUFBVSxHQUFHO0FBQ2pCQyxNQUFBQSxhQUFhLEVBQUVKLElBREU7QUFFakJLLE1BQUFBLEdBQUcsRUFBRyxXQUFVZCxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsY0FBZSxxQkFBb0JQLFFBQVM7QUFGdkQsS0FBbkI7QUFJQSxXQUFRTixHQUFHLENBQUMwQixJQUFKLENBQVNDLElBQUksQ0FBQ0MsU0FBTCxDQUFlTCxVQUFmLENBQVQsQ0FBUjtBQUNELEdBUkQ7QUFTRCxDQW5CRDs7ZUFxQmV6QixNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qb25haGtlcnNoZW4vRG9jdW1lbnRzL0RhcnRtb3V0aC8yMFgvQ09TQ181Mi9wbGF0Zm9ybS1hcGktam9uYWhrYWxzbmVya2Vyc2hlbi9zcmMvc2VydmljZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF3cyBmcm9tICdhd3Mtc2RrJztcblxuY29uc3Qgc2lnblMzID0gKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHMzID0gbmV3IGF3cy5TMyh7IHNpZ25hdHVyZVZlcnNpb246ICd2NCcsIHJlZ2lvbjogJ3VzLWVhc3QtMicgfSk7IGNvbnN0IGZpbGVOYW1lID0gcmVxLnF1ZXJ5WydmaWxlLW5hbWUnXTtcbiAgY29uc3QgZmlsZVR5cGUgPSByZXEucXVlcnlbJ2ZpbGUtdHlwZSddO1xuICBjb25zdCBzM1BhcmFtcyA9IHtcbiAgICBCdWNrZXQ6IHByb2Nlc3MuZW52LlMzX0JVQ0tFVF9OQU1FLFxuICAgIEtleTogZmlsZU5hbWUsXG4gICAgRXhwaXJlczogNjAsXG4gICAgQ29udGVudFR5cGU6IGZpbGVUeXBlLFxuICAgIEFDTDogJ3B1YmxpYy1yZWFkJyxcbiAgfTtcbiAgczMuZ2V0U2lnbmVkVXJsKCdwdXRPYmplY3QnLCBzM1BhcmFtcywgKGVyciwgZGF0YSkgPT4ge1xuICAgIGlmIChlcnIpIHsgcmVzLnN0YXR1cyg0MjIpLmVuZCgpOyB9XG5cbiAgICBjb25zdCByZXR1cm5EYXRhID0ge1xuICAgICAgc2lnbmVkUmVxdWVzdDogZGF0YSxcbiAgICAgIHVybDogYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5TM19CVUNLRVRfTkFNRX0uczMuYW1hem9uYXdzLmNvbS8ke2ZpbGVOYW1lfWAsXG4gICAgfTtcbiAgICByZXR1cm4gKHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHJldHVybkRhdGEpKSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgc2lnblMzO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "s3.js"
      ],
      "names": [
        "signS3",
        "req",
        "res",
        "s3",
        "aws",
        "S3",
        "signatureVersion",
        "region",
        "fileName",
        "query",
        "fileType",
        "s3Params",
        "Bucket",
        "process",
        "env",
        "S3_BUCKET_NAME",
        "Key",
        "Expires",
        "ContentType",
        "ACL",
        "getSignedUrl",
        "err",
        "data",
        "status",
        "end",
        "returnData",
        "signedRequest",
        "url",
        "send",
        "JSON",
        "stringify"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEA,MAAMA,MAAM,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3B,QAAMC,EAAE,GAAG,IAAIC,gBAAIC,EAAR,CAAW;AAAEC,IAAAA,gBAAgB,EAAE,IAApB;AAA0BC,IAAAA,MAAM,EAAE;AAAlC,GAAX,CAAX;AAAwE,QAAMC,QAAQ,GAAGP,GAAG,CAACQ,KAAJ,CAAU,WAAV,CAAjB;AACxE,QAAMC,QAAQ,GAAGT,GAAG,CAACQ,KAAJ,CAAU,WAAV,CAAjB;AACA,QAAME,QAAQ,GAAG;AACfC,IAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,cADL;AAEfC,IAAAA,GAAG,EAAER,QAFU;AAGfS,IAAAA,OAAO,EAAE,EAHM;AAIfC,IAAAA,WAAW,EAAER,QAJE;AAKfS,IAAAA,GAAG,EAAE;AALU,GAAjB;AAOAhB,EAAAA,EAAE,CAACiB,YAAH,CAAgB,WAAhB,EAA6BT,QAA7B,EAAuC,CAACU,GAAD,EAAMC,IAAN,KAAe;AACpD,QAAID,GAAJ,EAAS;AAAEnB,MAAAA,GAAG,CAACqB,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AAAwB;;AAEnC,UAAMC,UAAU,GAAG;AACjBC,MAAAA,aAAa,EAAEJ,IADE;AAEjBK,MAAAA,GAAG,EAAG,WAAUd,OAAO,CAACC,GAAR,CAAYC,cAAe,qBAAoBP,QAAS;AAFvD,KAAnB;AAIA,WAAQN,GAAG,CAAC0B,IAAJ,CAASC,IAAI,CAACC,SAAL,CAAeL,UAAf,CAAT,CAAR;AACD,GARD;AASD,CAnBD;;eAqBezB,M",
      "sourceRoot": "/Users/jonahkershen/Documents/Dartmouth/20X/COSC_52/platform-api-jonahkalsnerkershen/src/services/",
      "sourcesContent": [
        "import aws from 'aws-sdk';\n\nconst signS3 = (req, res) => {\n  const s3 = new aws.S3({ signatureVersion: 'v4', region: 'us-east-2' }); const fileName = req.query['file-name'];\n  const fileType = req.query['file-type'];\n  const s3Params = {\n    Bucket: process.env.S3_BUCKET_NAME,\n    Key: fileName,\n    Expires: 60,\n    ContentType: fileType,\n    ACL: 'public-read',\n  };\n  s3.getSignedUrl('putObject', s3Params, (err, data) => {\n    if (err) { res.status(422).end(); }\n\n    const returnData = {\n      signedRequest: data,\n      url: `https://${process.env.S3_BUCKET_NAME}.s3.amazonaws.com/${fileName}`,\n    };\n    return (res.send(JSON.stringify(returnData)));\n  });\n};\n\nexport default signS3;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1597890295153
  }
}